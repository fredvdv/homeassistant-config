kiosk_mode:
  hide_header: true
decluttering_templates:
  one_person:
    card:
      type: custom:stack-in-card
      mode: horizontal
      cards:
        - type: custom:mushroom-person-card
          entity: '[[person]]'
          secondary_info: none
          use_entity_picture: true
          tap_action:
            action: navigate
            navigation_path: '[[path]]'
          double_tap_action:
            action: none
          hold_action:
            action: none
          icon_type: entity-picture
          card_mod:
            style: |
              ha-card {
                background-color: rgba(0,0,0,0);
                box-shadow: none;
                border-style: hidden;
              }
        - type: vertical-stack
          cards:
            - type: custom:mushroom-chips-card
              chips:
                - type: entity
                  entity: '[[temperature]]'
                  card_mod:
                    style: |
                      ha-card {
                        background-color: rgba(0,0,0,0);
                        box-shadow: none;
                        border-style: hidden;
                      }
                - type: entity
                  entity: '[[humidity]]'
                  card_mod:
                    style: |
                      ha-card {
                        background-color: rgba(0,0,0,0);
                        box-shadow: none;
                        border-style: hidden;
                      }
              alignment: end
              card_mod:
                style: |
                  ha-card {
                    background-color: rgba(0,0,0,0);
                    box-shadow: none;
                    border-style: hidden;
                  }
  two_person:
    card:
      type: custom:stack-in-card
      mode: horizontal
      cards:
        - type: custom:mushroom-person-card
          entity: '[[person1]]'
          secondary_info: none
          use_entity_picture: true
          tap_action:
            action: navigate
            navigation_path: '[[path]]'
          double_tap_action:
            action: none
          hold_action:
            action: none
          icon_type: entity-picture
          card_mod:
            style: |
              ha-card {
                background-color: rgba(0,0,0,0);
                box-shadow: none;
                border-style: hidden;
              }
        - type: custom:mushroom-person-card
          entity: '[[person2]]'
          secondary_info: none
          use_entity_picture: true
          tap_action:
            action: navigate
            navigation_path: '[[path]]'
          double_tap_action:
            action: none
          hold_action:
            action: none
          icon_type: entity-picture
          card_mod:
            style: |
              ha-card {
                background-color: rgba(0,0,0,0);
                box-shadow: none;
                border-style: hidden;
              }
        - type: vertical-stack
          cards:
            - type: custom:mushroom-chips-card
              chips:
                - type: entity
                  entity: '[[temperature]]'
                  card_mod:
                    style: |
                      ha-card {
                        background-color: rgba(0,0,0,0);
                        box-shadow: none;
                        border-style: hidden;
                      }
                - type: entity
                  entity: '[[humidity]]'
                  card_mod:
                    style: |
                      ha-card {
                        background-color: rgba(0,0,0,0);
                        box-shadow: none;
                        border-style: hidden;
                      }
              alignment: end
              card_mod:
                style: |
                  ha-card {
                    background-color: rgba(0,0,0,0);
                    box-shadow: none;
                    border-style: hidden;
                  }
  room:
    card:
      type: custom:stack-in-card
      mode: horizontal
      cards:
        - type: custom:mushroom-template-card
          layout: horizontal
          icon: '[[icon]]'
          primary: '[[name]]'
          tap_action:
            action: navigate
            navigation_path: '[[path]]'
          double_tap_action:
            action: none
          hold_action:
            action: none
          card_mod:
            style: |
              ha-card {
                background-color: rgba(0,0,0,0);
                box-shadow: none;
                border-style: hidden;
              }
        - type: vertical-stack
          cards:
            - type: custom:mushroom-chips-card
              chips:
                - type: entity
                  entity: '[[temperature]]'
                  card_mod:
                    style: |
                      ha-card {
                        background-color: rgba(0,0,0,0);
                        box-shadow: none;
                        border-style: hidden;
                      }
                - type: entity
                  entity: '[[humidity]]'
                  card_mod:
                    style: |
                      ha-card {
                        background-color: rgba(0,0,0,0);
                        box-shadow: none;
                        border-style: hidden;
                      }
              alignment: end
              card_mod:
                style: |
                  ha-card {
                    background-color: rgba(0,0,0,0);
                    box-shadow: none;
                    border-style: hidden;
                  }
  remote_button_empty:
    card:
      type: custom:button-card
      show_icon: false
      tap_action:
        action: null
      hold_action:
        action: none
      styles:
        card:
          - height: 50px
      card_mod:
        style: |
          ha-card {
            background-color: rgba(0,0,0,0);
            box-shadow: none;
            border-style: hidden;
          }
  remote_button_icon:
    default:
      - remote: remote.artemis
      - name: ''
      - card_heigth: 50px
      - icon_width: 60px
      - hold_secs: 0
      - num_repeats: 1
      - delay_secs: 0.1
    card:
      type: custom:button-card
      name: '[[name]]'
      icon: '[[icon]]'
      tap_action:
        action: perform-action
        perform_action: remote.send_command
        data:
          command: '[[tap_command]]'
          device: '[[device]]'
        target:
          entity_id: '[[remote]]'
      hold_action:
        action: perform-action
        perform_action: remote.send_command
        data:
          command: '[[hold_command]]'
          device: '[[device]]'
          hold_secs: '[[hold_secs]]'
          delay_secs: '[[delay_secs]]'
          num_repeats: '[[num_repeats]]'
        target:
          entity_id: '[[remote]]'
      styles:
        card:
          - heigth: '[[card_heigth]]'
        icon:
          - width: '[[icon_width]]'
      card_mod:
        style: |
          ha-card {
            background-color: rgba(0,0,0,0);
            box-shadow: none;
            border-style: hidden;
          }
  remote_button_picture:
    default:
      - remote: remote.artemis
      - card_heigth: 50px
      - icon_width: 60px
      - hold_seconds: 0.1s
    card:
      type: custom:button-card
      entity_picture: '[[picture]]'
      tap_action:
        action: perform-action
        perform_action: remote.send_command
        data:
          command: '[[tap_command]]'
          device: '[[device]]'
        target:
          entity_id: '[[remote]]'
      hold_action:
        action: perform-action
        perform_action: remote.send_command
        data:
          command: '[[hold_command]]'
        target:
          entity_id: '[[remote]]'
      styles:
        card:
          - heigth: '[[card_heigth]]'
        icon:
          - width: '[[icon_width]]'
      card_mod:
        style: |
          ha-card {
            background-color: rgba(0,0,0,0);
            box-shadow: none;
            border-style: hidden;
          }
  remote_button_activity_picture:
    default:
      - remote: remote.artemis
      - media_player: media_player.artemis
      - card_heigth: 50px
      - picture_width: 60px
    card:
      type: custom:button-card
      entity_picture: '[[picture]]'
      show_entity_picture: true
      tap_action:
        action: perform-action
        perform_action: remote.turn_on
        data:
          activity: '[[tap_activity]]'
        target:
          entity_id: '[[remote]]'
      styles:
        card:
          - heigth: '[[card_heigth]]'
        icon:
          - width: '[[picture_width]]'
      card_mod:
        style: |
          ha-card {
            background-color: rgba(0,0,0,0);
            box-shadow: none;
            border-style: hidden;
          }
  remote_button_channel_picture:
    default:
      - remote: remote.artemis
      - media_player: media_player.artemis
      - card_heigth: 50px
      - picture_width: 60px
    card:
      type: custom:button-card
      entity_picture: '[[picture]]'
      show_entity_picture: true
      tap_action:
        action: call-service
        service: script.multi_tap_action
        service_data:
          actions:
            - service: remote.send_command
              entity_id: '[[remote]]'
              data:
                command: HOME
            - service: media_player.play_media
              entity_id: '[[media_player]]'
              data:
                media_content_type: channel
                media_content_id: '[[channel | int]]'
              wait: 500
      styles:
        card:
          - heigth: '[[card_heigth]]'
        icon:
          - width: '[[picture_width]]'
      card_mod:
        style: |
          ha-card {
            background-color: rgba(0,0,0,0);
            box-shadow: none;
            border-style: hidden;
          }
  remote_button_channel:
    default:
      - remote: remote.artemis
      - card_heigth: 50px
      - icon_width: 60px
      - hold_seconds: 0.1s
    card:
      type: custom:button-card
      icon: '[[icon]]'
      tap_action:
        action: '[[perform-action]]'
        perform_action: remote.send_command
        data:
          command: '[[tap_command]]'
        target:
          entity_id: '[[remote]]'
      hold_action:
        action: perform-action
        perform_action: remote.send_command
        data:
          command: '[[hold_command]]'
        target:
          entity_id: '[[remote]]'
      styles:
        card:
          - heigth: '[[card_heigth]]'
        icon:
          - width: '[[icon_width]]'
      card_mod:
        style: |
          ha-card {
            background-color: rgba(0,0,0,0);
            box-shadow: none;
            border-style: hidden;
          }
button_card_templates:
  inkwell:
    show_name: false
    show_state: true
    extra_styles: |
      [[[ return `
        @keyframes pulse {
          5% {
            background-color: ${variables.color};
          }
        }
      `]]]
    styles:
      icon:
        - opacity: 0.7
        - color: '[[[ return variables.color ]]]'
        - filter: drop-shadow( 0 0 2px rgba(0, 0, 0, .7))
      state:
        - font-size: 1.5em
        - font-weight: bold
        - text-shadow: 0 0 6px black
        - overflow: visible
      card:
        - border: solid 3px gray
        - border-top: none
        - background: |
            [[[
              var level = entity.state;
              var color = variables.color;
              return `linear-gradient(to top, ${color}, ${color} ${level}%, rgba(255,255,255,0.12) ${level}%)`
            ]]]
        - animation: |
            [[[
              return (0 + entity.state) < 10
                ? 'pulse ease-in-out 1s infinite'
                : 'none'
            ]]]
views:
  - title: HOME
    visible: true
    icon: ''
    subview: false
    badges: []
    cards: []
    type: sections
    sections:
      - type: grid
        cards:
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-chips-card
                chips:
                  - type: template
                    content: >-
                      {{states('sensor.system_monitor_processor_temperature')
                      }}°C
                    icon: mdi:fan
                    icon_color: |-
                      {% if states('fan.rpi_cooling_fan') == 'on' -%}
                          green
                      {%- else  -%}
                          grey
                      {%- endif %}
                alignment: start
              - type: custom:mushroom-chips-card
                chips:
                  - type: entity
                    entity: sensor.xiaomi_temperature_exterieur_temperature
                alignment: center
              - type: custom:mushroom-chips-card
                chips:
                  - type: entity
                    entity: sensor.xiaomi_temperature_exterieur_humidity
                alignment: center
              - type: custom:mushroom-chips-card
                chips:
                  - type: menu
                alignment: end
          - type: custom:stack-in-card
            mode: vertical
            cards:
              - type: weather-forecast
                entity: weather.forecast_home
                name: Blanmont
                show_current: true
                show_forecast: false
              - type: custom:mushroom-chips-card
                chips:
                  - type: template
                    icon: mdi:windsock
                    content: >-
                      {{ state_attr('weather.forecast_home', 'wind_speed') |
                      round(0) }} km/h
                    icon_color: blue
                  - type: template
                    icon: mdi:compass-outline
                    content: >-
                      {% set bearing = state_attr('weather.forecast_home',
                      'wind_bearing') | float(0) %}{% set dirs =
                      ['N','NNE','NE','ENE','E','ESE','SE','SSE','S','SSW','SW','WSW','W','WNW','NW','NNW']
                      %}{{ dirs[(((bearing + 11.25) % 360) / 22.5) | int] }}
                    icon_color: cyan
                  - type: template
                    icon: mdi:gauge
                    content: '{{ state_attr(''weather.forecast_home'', ''pressure'') }} hPa'
                    icon_color: purple
                  - type: template
                    icon: mdi:water-percent
                    content: '{{ state_attr(''weather.forecast_home'', ''humidity'') }}%'
                    icon_color: teal
                alignment: justify
            grid_options:
              columns: 12
              rows: 2
          - type: horizontal-stack
            cards:
              - type: custom:button-card
                entity: switch.salon_lampe_fenetre
                icon: mdi:lamp
                show_name: false
                color: grey
                state:
                  - value: 'on'
                    color: blue
                  - value: 'off'
                    color: grey
                tap_action:
                  action: toggle
                double_tap_action:
                  action: more-info
                hold_action:
                  action: more-info
                styles:
                  card:
                    - padding: 10px
                  icon:
                    - width: 35px
              - type: custom:button-card
                entity: switch.salon_lampe_table
                icon: mdi:chandelier
                show_name: false
                color: grey
                state:
                  - value: 'on'
                    color: green
                  - value: 'off'
                    color: grey
                tap_action:
                  action: toggle
                styles:
                  card:
                    - padding: 10px
                  icon:
                    - width: 35px
              - type: custom:button-card
                entity: switch.salon_television
                icon: mdi:television-classic
                show_name: false
                color: grey
                state:
                  - value: 'on'
                    color: red
                  - value: 'off'
                    color: grey
                confirmation:
                  text: Toggle TV Power?
                tap_action:
                  action: |
                    [[[
                      if (entity) return 'toggle';
                      else return 'none';
                    ]]]
                styles:
                  card:
                    - padding: 10px
                  icon:
                    - width: 35px
              - type: button
                show_name: false
                show_icon: true
                tap_action:
                  action: navigate
                  navigation_path: /dashboard-home/remote
                hold_action:
                  action: none
                icon: mdi:remote
                show_state: false
          - type: custom:bubble-card
            card_type: button
            entity: light.salon_plafonnier
            button_type: slider
            name: Plafonnier Salon
            tap_action:
              action: toggle
            card_layout: large
            icon: mdi:sofa
            color: grey
            state:
              - value: 'on'
                color: yellow
              - value: 'off'
                color: grey
          - type: horizontal-stack
            cards:
              - type: gauge
                name: last 15 minutes
                needle: true
                severity:
                  green: 0
                  yellow: 30
                  red: 50
                entity: sensor.water_usage_quarter_hourly
                max: 100
                unit: L
              - type: gauge
                name: last hour
                needle: true
                severity:
                  green: 0
                  yellow: 95
                  red: 300
                entity: sensor.water_usage_hourly
                min: 0
                unit: L
                max: 500
              - type: gauge
                name: today
                needle: true
                severity:
                  green: 0
                  yellow: 300
                  red: 700
                min: 0
                unit: L
                max: 1000
                entity: sensor.water_usage_daily
          - type: vertical-stack
            cards:
              - type: custom:mushroom-chips-card
                chips:
                  - type: template
                    content: '{{states(''sensor.electricity_meter_voltage_phase_l1'') }}V'
                    icon: mdi:lightning-bolt
                    icon_color: >-
                      {% if states('sensor.electricity_meter_voltage_phase_l1')
                      | int > 250 -%}
                          red
                      {%- else  -%}
                          green
                      {%- endif %}
                  - type: template
                    content: '{{states(''sensor.electricity_meter_voltage_phase_l2'') }}V'
                    icon: mdi:lightning-bolt
                    icon_color: >-
                      {% if states('sensor.electricity_meter_voltage_phase_l2')
                      | int > 250 -%}
                          red
                      {%- else  -%}
                          green
                      {%- endif %}
                  - type: template
                    content: '{{states(''sensor.electricity_meter_voltage_phase_l3'') }}V'
                    icon: mdi:lightning-bolt
                    icon_color: >-
                      {% if states('sensor.electricity_meter_voltage_phase_l3')
                      | int > 250 -%}
                          red
                      {%- else  -%}
                          green
                      {%- endif %}
                alignment: center
              - type: horizontal-stack
                cards:
                  - type: gauge
                    entity: sensor.electricity_meter_power_consumption
                    needle: true
                    max: 5
                    name: Consommation
                  - type: custom:mushroom-template-card
                    icon: >-
                      {% if states('sensor.electricity_meter_power_production')
                      > states('sensor.electricity_meter_power_consumption') -%}
                          mdi:solar-power-variant
                      {%- else  -%}
                          mdi:lightning-bolt
                      {%- endif %}
                    icon_color: >-
                      {% if states('sensor.electricity_meter_power_production')
                      > states('sensor.electricity_meter_power_consumption') -%}
                          green
                      {%- else  -%}
                          red
                      {%- endif %}
                    secondary: >-
                      {% if states('sensor.electricity_meter_power_production')
                      > states('sensor.electricity_meter_power_consumption') -%}
                          PRODUCTION
                      {%- else  -%}
                          CONSOMMATION
                      {%- endif %}
                    layout: vertical
                    fill_container: true
                    tap_action:
                      action: none
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                  - type: gauge
                    entity: sensor.electricity_meter_power_production
                    needle: true
                    name: Production
                    max: 8
          - type: vertical-stack
            cards:
              - type: custom:button-card
                entity: switch.ecoflow
                name: EcoFlow Delta 2
                show_name: false
                show_state: false
                show_icon: false
                tap_action:
                  action: more-info
                  entity: sensor.delta_2_max_0868_battery_level
                styles:
                  card:
                    - padding: 16px
                    - padding-bottom: 8px
                    - border-radius: 12px 12px 0 0
                  grid:
                    - grid-template-areas: '"icon info" "battery battery" "power power"'
                    - grid-template-columns: 48px 1fr
                    - grid-template-rows: auto auto auto
                    - gap: 8px
                  custom_fields:
                    icon:
                      - justify-self: start
                      - align-self: center
                    info:
                      - justify-self: start
                      - align-self: center
                    battery:
                      - width: 100%
                      - height: 12px
                      - border-radius: 6px
                      - background: rgba(255,255,255,0.2)
                      - overflow: hidden
                      - margin-top: 8px
                    power:
                      - width: 100%
                      - display: flex
                      - justify-content: space-between
                      - font-size: 12px
                      - opacity: 0.7
                      - margin-top: 8px
                custom_fields:
                  icon: |
                    [[[
                      const isCharging = states['switch.ecoflow'].state === 'on';
                      const level = parseInt(states['sensor.delta_2_max_0868_battery_level'].state);
                      let icon = 'mdi:battery';
                      let color = '#4caf50';
                      
                      if (level < 20) {
                        icon = isCharging ? 'mdi:battery-charging-20' : 'mdi:battery-20';
                        color = '#f44336';
                      } else if (level < 50) {
                        icon = isCharging ? 'mdi:battery-charging-50' : 'mdi:battery-50';
                        color = '#ff9800';
                      } else if (level < 80) {
                        icon = isCharging ? 'mdi:battery-charging-70' : 'mdi:battery-70';
                      } else {
                        icon = isCharging ? 'mdi:battery-charging-90' : 'mdi:battery-90';
                      }
                      
                      return '<ha-icon icon="' + icon + '" style="width:40px; height:40px; color:' + color + ';"></ha-icon>';
                    ]]]
                  info: |
                    [[[
                      const isCharging = states['switch.ecoflow'].state === 'on';
                      const level = states['sensor.delta_2_max_0868_battery_level'].state;
                      const surplus = states['sensor.electricity_surplus']?.state || '0';
                      const surplusDuration = states['sensor.electricity_surplus_duration']?.state || '0';
                      const chargePower = states['number.delta_2_max_0868_ac_charging_power']?.state || '0';
                      const status = isCharging ? 'Charging' : 'Standby';
                      const surplusVal = parseFloat(surplus);
                      const durationVal = parseFloat(surplusDuration);
                      const surplusText = surplusVal > 0.5 ? ' • Surplus ' + surplusVal.toFixed(1) + ' kW (' + durationVal.toFixed(0) + 'min)' : (surplusVal > 0 ? ' • Surplus ' + surplusVal.toFixed(1) + ' kW' : '');
                      const chargeText = isCharging ? ' • Limit ' + chargePower + 'W' : '';
                      
                      return '<div style="font-size:16px; font-weight:500;">EcoFlow Delta 2</div><div style="font-size:13px; opacity:0.7;">' + status + surplusText + chargeText + '</div>';
                    ]]]
                  battery: |
                    [[[
                      const level = states['sensor.delta_2_max_0868_battery_level'].state;
                      const isCharging = states['switch.ecoflow'].state === 'on';
                      const color = isCharging ? '#4caf50' : '#2196f3';
                      return '<div style="background:' + color + '; height:100%; width:' + level + '%; border-radius:6px; transition: width 0.5s ease;"></div>';
                    ]]]
                  power: |
                    [[[
                      const level = states['sensor.delta_2_max_0868_battery_level'].state;
                      const inPower = states['sensor.delta_2_max_0868_ac_in_power'].state;
                      const outPower = states['sensor.delta_2_max_0868_total_out_power'].state;
                      const remainingMins = parseInt(states['sensor.delta_2_max_0868_discharge_remaining_time'].state);
                      
                      let timeStr = '';
                      if (remainingMins > 0) {
                        const hours = Math.floor(remainingMins / 60);
                        const mins = remainingMins % 60;
                        timeStr = hours + 'h' + (mins < 10 ? '0' : '') + mins;
                      }
                      
                      return '<span>' + level + '% • ' + timeStr + '</span><span>⬇️ ' + inPower + 'W  ⬆️ ' + outPower + 'W</span>';
                    ]]]
              - type: horizontal-stack
                cards:
                  - type: custom:button-card
                    entity: switch.ecoflow
                    name: Charge
                    icon: mdi:transmission-tower-import
                    show_state: false
                    tap_action:
                      action: toggle
                    hold_action:
                      action: more-info
                    styles:
                      card:
                        - padding: 12px
                        - border-radius: 0 0 0 12px
                        - margin-top: '-8px'
                      icon:
                        - width: 20px
                        - height: 20px
                      name:
                        - font-size: 11px
                        - margin-top: 4px
                    state:
                      - value: 'on'
                        color: '#2196f3'
                        styles:
                          card:
                            - background: rgba(33,150,243,0.2)
                      - value: 'off'
                        color: rgba(255,255,255,0.5)
                  - type: custom:button-card
                    entity: switch.delta_2_max_0868_ac_enabled
                    name: AC
                    icon: mdi:power-plug
                    show_state: false
                    tap_action:
                      action: toggle
                    hold_action:
                      action: more-info
                    styles:
                      card:
                        - padding: 12px
                        - border-radius: 0
                        - margin-top: '-8px'
                      icon:
                        - width: 20px
                        - height: 20px
                      name:
                        - font-size: 11px
                        - margin-top: 4px
                    state:
                      - value: 'on'
                        color: '#4caf50'
                        styles:
                          card:
                            - background: rgba(76,175,80,0.2)
                      - value: 'off'
                        color: rgba(255,255,255,0.5)
                  - type: custom:button-card
                    entity: switch.delta_2_max_0868_usb_enabled
                    name: USB
                    icon: mdi:usb
                    show_state: false
                    tap_action:
                      action: toggle
                    hold_action:
                      action: more-info
                    styles:
                      card:
                        - padding: 12px
                        - border-radius: 0
                        - margin-top: '-8px'
                      icon:
                        - width: 20px
                        - height: 20px
                      name:
                        - font-size: 11px
                        - margin-top: 4px
                    state:
                      - value: 'on'
                        color: '#4caf50'
                        styles:
                          card:
                            - background: rgba(76,175,80,0.2)
                      - value: 'off'
                        color: rgba(255,255,255,0.5)
      - type: grid
        cards:
          - type: heading
            heading: Personnes
            heading_style: title
            icon: mdi:account
          - type: custom:decluttering-card
            template: two_person
            variables:
              - person1: person.fred
              - person2: person.karin
              - path: chambre-fred
              - temperature: sensor.chambre_fred_temperature
              - humidity: sensor.chambre_fred_humidity
          - type: custom:decluttering-card
            template: two_person
            variables:
              - person1: person.amelie
              - person2: person.gontran
              - path: chambre-amelie
              - temperature: sensor.chambre_amelie_temperature
              - humidity: sensor.chambre_amelie_humidity
          - type: custom:decluttering-card
            template: one_person
            variables:
              - person: person.thomas
              - path: chambre-thomas
              - temperature: sensor.chambre_thomas_temperature
              - humidity: sensor.chambre_thomas_humidity
          - type: custom:decluttering-card
            template: two_person
            variables:
              - person1: person.espen
              - person2: person.charlotte
              - path: chambre-espen
              - temperature: sensor.chambre_espen_temperature
              - humidity: sensor.chambre_espen_humidity
          - type: heading
            heading: Pièces
            heading_style: title
            icon: mdi:home
          - type: custom:decluttering-card
            template: room
            variables:
              - icon: mdi:sofa
              - name: Salon
              - path: salon
              - temperature: sensor.salon_temperature
              - humidity: sensor.salon_humidity
          - type: custom:decluttering-card
            template: room
            variables:
              - icon: mdi:garage
              - name: Garage
              - path: garage
              - temperature: sensor.garage_temperature
              - humidity: sensor.garage_humidity
          - type: custom:decluttering-card
            template: room
            variables:
              - icon: mdi:chef-hat
              - name: Cuisine
              - path: cuisine
              - temperature: sensor.cuisine_temperature
              - humidity: sensor.cuisine_humidity
          - type: custom:decluttering-card
            template: room
            variables:
              - icon: mdi:desk
              - name: Bureau
              - path: bureau
              - temperature: sensor.bureau_temperature
              - humidity: sensor.bureau_humidity
          - type: custom:decluttering-card
            template: room
            variables:
              - icon: mdi:bathtub
              - name: Salle de bain
              - path: salle-de-bain
              - temperature: sensor.salle_de_bain_temperature
              - humidity: sensor.salle_de_bain_humidity
          - type: custom:decluttering-card
            template: room
            variables:
              - icon: mdi:washing-machine
              - name: Buanderie
              - path: buanderie
              - temperature: sensor.buanderie_temperature
              - humidity: sensor.buanderie_humidity
          - type: custom:decluttering-card
            template: room
            variables:
              - icon: mdi:home-roof
              - name: Grenier
              - path: grenier
              - temperature: sensor.grenier_temperature
              - humidity: sensor.grenier_humidity
          - type: custom:decluttering-card
            template: room
            variables:
              - icon: mdi:door-closed
              - name: Hall Rez
              - path: hall-rez
              - temperature: sensor.hall_rez_temperature
              - humidity: sensor.hall_rez_humidity
          - type: custom:decluttering-card
            template: room
            variables:
              - icon: mdi:door-closed
              - name: Hall Etage
              - path: hall-etage
              - temperature: sensor.hall_etage_temperature
              - humidity: sensor.hall_etage_humidity
          - type: custom:decluttering-card
            template: room
            variables:
              - icon: mdi:subway-variant
              - name: Cave Détente
              - path: cave-detente
              - temperature: sensor.cave_detente_temperature
              - humidity: sensor.cave_detente_humidity
          - type: custom:decluttering-card
            template: room
            variables:
              - icon: mdi:subway-variant
              - name: Cave Hall
              - path: cave-hall
              - temperature: sensor.cave_temperature
              - humidity: sensor.cave_humidity
          - type: custom:decluttering-card
            template: room
            variables:
              - icon: mdi:subway-variant
              - name: Cave Milieu
              - path: cave-milieu
              - temperature: sensor.cave_milieu_temperature
              - humidity: sensor.cave_milieu_humidity
          - type: custom:decluttering-card
            template: room
            variables:
              - icon: mdi:tools
              - name: Local Technique
              - path: local-technique
  - title: Chambre Fred
    path: chambre-fred
    subview: false
    cards: []
    type: sections
    sections:
      - type: grid
        cards:
          - type: custom:mushroom-chips-card
            chips:
              - type: action
                icon: mdi:home-outline
                tap_action:
                  action: navigate
                  navigation_path: home
                hold_action:
                  action: none
                double_tap_action:
                  action: none
              - type: template
                content: Chambre Fred
                tap_action: none
              - type: menu
            alignment: justify
          - type: vertical-stack
            cards:
              - type: horizontal-stack
                cards:
                  - type: custom:mini-graph-card
                    entities:
                      - sensor.chambre_fred_temperature
                    show:
                      state: true
                      name: true
                      icon: true
                    name: Température
                    animate: true
                    point_per_hour: 0.5
                    hours_to_show: 48
                    color_thresholds:
                      - value: 0
                        color: '#0000FF'
                      - value: 15
                        color: '#00FFFF'
                      - value: 20
                        color: '#008000'
                      - value: 22
                        color: '#FFFF00'
                      - value: 23
                        color: '#FF8000'
                      - value: 26
                        color: '#FF0000'
                    card_mod:
                      style: |
                        ha-card {
                          background-color: rgba(0,0,0,0);
                          box-shadow: none;
                          border-style: hidden;
                        }
                  - type: custom:mini-graph-card
                    entities:
                      - sensor.chambre_fred_humidity
                    show:
                      state: true
                      name: true
                      icon: true
                    name: Humidité
                    animate: true
                    point_per_hour: 0.5
                    hours_to_show: 48
                    card_mod:
                      style: |
                        ha-card {
                          background-color: rgba(0,0,0,0);
                          box-shadow: none;
                          border-style: hidden;
                        }
              - square: true
                columns: 3
                type: grid
                cards:
                  - type: button
                    icon: mdi:lamp
                    show_name: false
                    entity: switch.lampe_chambre_karin
                  - type: button
                    icon: mdi:chandelier
                    show_name: false
                    entity: switch.chambre_fred_plafonnier
                  - type: button
                    icon: mdi:lamp
                    show_name: false
                    entity: switch.lampe_chambre_fred
  - title: Chambre Espen
    path: chambre-espen
    subview: false
    cards: []
    type: sections
    sections:
      - type: grid
        cards:
          - type: custom:mushroom-chips-card
            chips:
              - type: action
                icon: mdi:home-outline
                tap_action:
                  action: navigate
                  navigation_path: home
                hold_action:
                  action: none
                double_tap_action:
                  action: none
              - type: template
                content: Chambre Espen
                tap_action: none
              - type: menu
            alignment: justify
          - type: vertical-stack
            cards:
              - type: horizontal-stack
                cards:
                  - type: custom:mini-graph-card
                    entities:
                      - sensor.chambre_espen_temperature
                    show:
                      state: true
                      name: true
                      icon: true
                    name: Température
                    animate: true
                    point_per_hour: 0.5
                    hours_to_show: 48
                    color_thresholds:
                      - value: 0
                        color: '#0000FF'
                      - value: 15
                        color: '#00FFFF'
                      - value: 20
                        color: '#008000'
                      - value: 22
                        color: '#FFFF00'
                      - value: 23
                        color: '#FF8000'
                      - value: 26
                        color: '#FF0000'
                    card_mod:
                      style: |
                        ha-card {
                          background-color: rgba(0,0,0,0);
                          box-shadow: none;
                          border-style: hidden;
                        }
                  - type: custom:mini-graph-card
                    entities:
                      - sensor.chambre_espen_humidity
                    show:
                      state: true
                      name: true
                      icon: true
                    name: Humidité
                    animate: true
                    point_per_hour: 0.5
                    hours_to_show: 48
                    card_mod:
                      style: |
                        ha-card {
                          background-color: rgba(0,0,0,0);
                          box-shadow: none;
                          border-style: hidden;
                        }
  - title: Chambre Amélie
    path: chambre-amelie
    subview: false
    cards: []
    type: sections
    sections:
      - type: grid
        cards:
          - type: custom:mushroom-chips-card
            chips:
              - type: action
                icon: mdi:home-outline
                tap_action:
                  action: navigate
                  navigation_path: home
                hold_action:
                  action: none
                double_tap_action:
                  action: none
              - type: template
                content: Chambre Amélie
                tap_action: none
              - type: menu
            alignment: justify
          - type: vertical-stack
            cards:
              - type: horizontal-stack
                cards:
                  - type: custom:mini-graph-card
                    entities:
                      - sensor.chambre_amelie_temperature
                    show:
                      state: true
                      name: true
                      icon: true
                    name: Température
                    animate: true
                    point_per_hour: 0.5
                    hours_to_show: 48
                    color_thresholds:
                      - value: 0
                        color: '#0000FF'
                      - value: 15
                        color: '#00FFFF'
                      - value: 20
                        color: '#008000'
                      - value: 22
                        color: '#FFFF00'
                      - value: 23
                        color: '#FF8000'
                      - value: 26
                        color: '#FF0000'
                    card_mod:
                      style: |
                        ha-card {
                          background-color: rgba(0,0,0,0);
                          box-shadow: none;
                          border-style: hidden;
                        }
                  - type: custom:mini-graph-card
                    entities:
                      - sensor.chambre_amelie_humidity
                    show:
                      state: true
                      name: true
                      icon: true
                    name: Humidité
                    animate: true
                    point_per_hour: 0.5
                    hours_to_show: 48
                    card_mod:
                      style: |
                        ha-card {
                          background-color: rgba(0,0,0,0);
                          box-shadow: none;
                          border-style: hidden;
                        }
  - title: Chambre Thomas
    path: chambre-thomas
    subview: false
    cards: []
    type: sections
    sections:
      - type: grid
        cards:
          - type: custom:mushroom-chips-card
            chips:
              - type: action
                icon: mdi:home-outline
                tap_action:
                  action: navigate
                  navigation_path: home
                hold_action:
                  action: none
                double_tap_action:
                  action: none
              - type: template
                content: Chambre Thomas
                tap_action: none
              - type: menu
            alignment: justify
          - type: vertical-stack
            cards:
              - type: horizontal-stack
                cards:
                  - type: custom:mini-graph-card
                    entities:
                      - sensor.chambre_thomas_temperature
                    show:
                      state: true
                      name: true
                      icon: true
                    name: Température
                    animate: true
                    point_per_hour: 0.5
                    hours_to_show: 48
                    color_thresholds:
                      - value: 0
                        color: '#0000FF'
                      - value: 15
                        color: '#00FFFF'
                      - value: 20
                        color: '#008000'
                      - value: 22
                        color: '#FFFF00'
                      - value: 23
                        color: '#FF8000'
                      - value: 26
                        color: '#FF0000'
                    card_mod:
                      style: |
                        ha-card {
                          background-color: rgba(0,0,0,0);
                          box-shadow: none;
                          border-style: hidden;
                        }
                  - type: custom:mini-graph-card
                    entities:
                      - sensor.chambre_thomas_humidity
                    show:
                      state: true
                      name: true
                      icon: true
                    name: Humidité
                    animate: true
                    point_per_hour: 0.5
                    hours_to_show: 48
                    card_mod:
                      style: |
                        ha-card {
                          background-color: rgba(0,0,0,0);
                          box-shadow: none;
                          border-style: hidden;
                        }
  - title: Salon
    path: salon
    subview: false
    cards: []
    type: sections
    sections:
      - type: grid
        cards:
          - type: custom:mushroom-chips-card
            chips:
              - type: action
                icon: mdi:home-outline
                tap_action:
                  action: navigate
                  navigation_path: home
                hold_action:
                  action: none
                double_tap_action:
                  action: none
              - type: template
                content: Salon
                tap_action: none
              - type: menu
            alignment: justify
          - type: custom:stack-in-card
            mode: vertical
            cards:
              - type: horizontal-stack
                cards:
                  - type: custom:mini-graph-card
                    entities:
                      - sensor.salon_temperature
                    show:
                      state: true
                      name: true
                      icon: true
                    name: Température
                    animate: true
                    point_per_hour: 0.5
                    hours_to_show: 48
                    color_thresholds:
                      - value: 0
                        color: '#0000FF'
                      - value: 15
                        color: '#00FFFF'
                      - value: 20
                        color: '#008000'
                      - value: 22
                        color: '#FFFF00'
                      - value: 23
                        color: '#FF8000'
                      - value: 26
                        color: '#FF0000'
                    card_mod:
                      style: |
                        ha-card {
                          background-color: rgba(0,0,0,0);
                          box-shadow: none;
                          border-style: hidden;
                        }
                  - type: custom:mini-graph-card
                    entities:
                      - sensor.salon_humidity
                    show:
                      state: true
                      name: true
                      icon: true
                    name: Humidité
                    animate: true
                    point_per_hour: 0.5
                    hours_to_show: 48
                    card_mod:
                      style: |
                        ha-card {
                          background-color: rgba(0,0,0,0);
                          box-shadow: none;
                          border-style: hidden;
                        }
          - type: horizontal-stack
            cards:
              - type: custom:button-card
                entity: switch.salon_lampe_fenetre
                icon: mdi:lamp
                show_name: false
                color: grey
                state:
                  - value: 'on'
                    color: blue
                  - value: 'off'
                    color: grey
                tap_action:
                  action: toggle
                double_tap_action:
                  action: more-info
                hold_action:
                  action: more-info
                styles:
                  card:
                    - padding: 10px
                  icon:
                    - width: 35px
              - type: custom:button-card
                entity: switch.salon_lampe_table
                icon: mdi:chandelier
                show_name: false
                color: grey
                state:
                  - value: 'on'
                    color: green
                  - value: 'off'
                    color: grey
                tap_action:
                  action: toggle
                styles:
                  card:
                    - padding: 10px
                  icon:
                    - width: 35px
              - type: custom:button-card
                entity: switch.salon_television
                icon: mdi:television-classic
                show_name: false
                color: grey
                state:
                  - value: 'on'
                    color: red
                  - value: 'off'
                    color: grey
                confirmation:
                  text: Toggle TV Power?
                tap_action:
                  action: toggle
                styles:
                  card:
                    - padding: 10px
                  icon:
                    - width: 35px
              - type: button
                show_name: false
                show_icon: true
                tap_action:
                  action: navigate
                  navigation_path: /dashboard-home/remote
                hold_action:
                  action: none
                icon: mdi:remote
                show_state: false
          - type: custom:bubble-card
            card_type: button
            entity: light.salon_plafonnier
            button_type: slider
            name: Plafonnier Salon
            tap_action:
              action: toggle
            card_layout: large
            icon: mdi:sofa
  - title: Cuisine
    path: cuisine
    subview: false
    cards: []
    type: sections
    sections:
      - type: grid
        cards:
          - type: custom:mushroom-chips-card
            chips:
              - type: action
                icon: mdi:home-outline
                tap_action:
                  action: navigate
                  navigation_path: home
                hold_action:
                  action: none
                double_tap_action:
                  action: none
              - type: template
                content: Cuisine
                tap_action: none
              - type: menu
            alignment: justify
          - type: vertical-stack
            cards:
              - type: horizontal-stack
                cards:
                  - type: custom:mini-graph-card
                    entities:
                      - sensor.cuisine_temperature
                    show:
                      state: true
                      name: true
                      icon: true
                    name: Température
                    animate: true
                    point_per_hour: 0.5
                    hours_to_show: 48
                    color_thresholds:
                      - value: 0
                        color: '#0000FF'
                      - value: 15
                        color: '#00FFFF'
                      - value: 20
                        color: '#008000'
                      - value: 22
                        color: '#FFFF00'
                      - value: 23
                        color: '#FF8000'
                      - value: 26
                        color: '#FF0000'
                    card_mod:
                      style: |
                        ha-card {
                          background-color: rgba(0,0,0,0);
                          box-shadow: none;
                          border-style: hidden;
                        }
                  - type: custom:mini-graph-card
                    entities:
                      - sensor.cuisine_humidity
                    show:
                      state: true
                      name: true
                      icon: true
                    name: Humidité
                    animate: true
                    point_per_hour: 0.5
                    hours_to_show: 48
                    card_mod:
                      style: |
                        ha-card {
                          background-color: rgba(0,0,0,0);
                          box-shadow: none;
                          border-style: hidden;
                        }
          - type: custom:button-card
            entity: sensor.lave_vaisselle_operation_state
            name: Lave-vaisselle
            show_name: false
            show_state: false
            show_icon: false
            tap_action:
              action: more-info
              entity: sensor.lave_vaisselle_operation_state
            hold_action:
              action: more-info
              entity: switch.lave_vaisselle_power
            styles:
              card:
                - padding: 16px
                - border-radius: 12px
              grid:
                - grid-template-areas: '"icon info" "bar bar" "details details" "door door"'
                - grid-template-columns: 48px 1fr
                - grid-template-rows: auto auto auto auto
                - gap: 8px
              custom_fields:
                icon:
                  - justify-self: start
                  - align-self: center
                info:
                  - justify-self: start
                  - align-self: center
                bar:
                  - width: 100%
                  - height: 8px
                  - border-radius: 4px
                  - background: rgba(255,255,255,0.2)
                  - overflow: hidden
                  - margin-top: 8px
                details:
                  - width: 100%
                  - display: flex
                  - justify-content: space-between
                  - font-size: 13px
                  - opacity: 0.7
                  - margin-top: 4px
                door:
                  - width: 100%
                  - display: flex
                  - align-items: center
                  - font-size: 12px
                  - opacity: 0.6
                  - margin-top: 8px
                  - padding-top: 8px
                  - border-top: 1px solid rgba(255,255,255,0.1)
            state:
              - value: inactive
                custom_fields:
                  icon: >-
                    <ha-icon icon="mdi:dishwasher-off" style="width:40px;
                    height:40px; color:grey;"></ha-icon>
              - value: ready
                custom_fields:
                  icon: >-
                    <ha-icon icon="mdi:dishwasher" style="width:40px;
                    height:40px; color:grey;"></ha-icon>
              - value: run
                custom_fields:
                  icon: >-
                    <ha-icon icon="mdi:dishwasher" style="width:40px;
                    height:40px; color:#4caf50;"></ha-icon>
              - value: finished
                custom_fields:
                  icon: >-
                    <ha-icon icon="mdi:check-circle" style="width:40px;
                    height:40px; color:#4caf50;"></ha-icon>
              - value: delayedstart
                custom_fields:
                  icon: >-
                    <ha-icon icon="mdi:timer-sand" style="width:40px;
                    height:40px; color:#2196f3;"></ha-icon>
              - value: actionrequired
                styles:
                  card:
                    - animation: blink 2s ease infinite
                custom_fields:
                  icon: >-
                    <ha-icon icon="mdi:dishwasher-alert" style="width:40px;
                    height:40px; color:#f44336;"></ha-icon>
              - value: error
                styles:
                  card:
                    - animation: blink 2s ease infinite
                custom_fields:
                  icon: >-
                    <ha-icon icon="mdi:dishwasher-alert" style="width:40px;
                    height:40px; color:#ff9800;"></ha-icon>
              - value: pause
                custom_fields:
                  icon: >-
                    <ha-icon icon="mdi:pause-circle" style="width:40px;
                    height:40px; color:#2196f3;"></ha-icon>
              - value: aborting
                styles:
                  card:
                    - animation: blink 2s ease infinite
                custom_fields:
                  icon: >-
                    <ha-icon icon="mdi:cancel" style="width:40px; height:40px;
                    color:#f44336;"></ha-icon>
            custom_fields:
              icon: |
                [[[
                  return '<ha-icon icon="mdi:dishwasher" style="width:40px; height:40px;"></ha-icon>';
                ]]]
              info: |
                [[[
                  const stateMap = {
                    'inactive': 'Inactif',
                    'ready': 'Prêt',
                    'run': 'En cours',
                    'delayedstart': 'Départ différé',
                    'actionrequired': 'Action requise',
                    'finished': 'Terminé',
                    'error': 'Erreur',
                    'pause': 'En pause',
                    'aborting': 'Annulation'
                  };
                  const programMap = {
                    'dishcare_dishwasher_program_intensiv_70': 'Intensif 70°',
                    'dishcare_dishwasher_program_auto_2': 'Auto',
                    'dishcare_dishwasher_program_eco_50': 'Éco 50°',
                    'dishcare_dishwasher_program_quick_45': 'Rapide 45\'',
                    'dishcare_dishwasher_program_pre_rinse': 'Pré-rinçage',
                    'dishcare_dishwasher_program_night_wash': 'Nuit',
                    'dishcare_dishwasher_program_kurz_60': 'Court 60°',
                    'dishcare_dishwasher_program_machine_care': 'Entretien'
                  };
                  const label = stateMap[entity.state] || entity.state;
                  const program = states['select.lave_vaisselle_active_program'].state;
                  const programLabel = programMap[program] || '';
                  const showProgram = ['run', 'pause', 'delayedstart'].includes(entity.state);
                  let subtitle = label;
                  if (showProgram && programLabel) {
                    subtitle = label + ' • ' + programLabel;
                  }
                  return '<div style="font-size:16px; font-weight:500;">Lave-vaisselle</div><div style="font-size:13px; opacity:0.7;">' + subtitle + '</div>';
                ]]]
              bar: |
                [[[
                  const isActive = ['run', 'pause'].includes(entity.state);
                  if (!isActive) return '';
                  const progress = states['sensor.lave_vaisselle_program_progress'].state;
                  return '<div style="background:#4caf50; height:100%; width:' + progress + '%; border-radius:4px; transition: width 0.5s ease;"></div>';
                ]]]
              details: |
                [[[
                  const isActive = ['run', 'pause', 'delayedstart'].includes(entity.state);
                  if (!isActive) return '';
                  const progress = states['sensor.lave_vaisselle_program_progress'].state;
                  const finishTime = states['sensor.lave_vaisselle_program_finish_time'].state;
                  let timeStr = '';
                  if (finishTime && finishTime !== 'unknown') {
                    const date = new Date(finishTime);
                    timeStr = 'Fin ' + date.toLocaleTimeString('fr-BE', {hour: '2-digit', minute:'2-digit'});
                  }
                  return '<span>' + progress + '%</span><span>' + timeStr + '</span>';
                ]]]
              door: |
                [[[
                  const doorState = states['sensor.lave_vaisselle_door'].state;
                  const doorMap = {
                    'closed': 'Fermée',
                    'open': 'Ouverte',
                    'locked': 'Verrouillée'
                  };
                  const doorLabel = doorMap[doorState] || doorState;
                  const doorIcon = doorState === 'open' ? 'mdi:door-open' : 'mdi:door-closed';
                  const doorColor = doorState === 'open' ? '#ff9800' : 'inherit';
                  return '<ha-icon icon="' + doorIcon + '" style="width:16px; height:16px; margin-right:6px; color:' + doorColor + ';"></ha-icon><span>Porte ' + doorLabel.toLowerCase() + '</span>';
                ]]]
  - title: Bureau
    path: bureau
    subview: false
    cards: []
    type: sections
    sections:
      - type: grid
        cards:
          - type: custom:mushroom-chips-card
            chips:
              - type: action
                icon: mdi:home-outline
                tap_action:
                  action: navigate
                  navigation_path: home
                hold_action:
                  action: none
                double_tap_action:
                  action: none
              - type: template
                content: Bureau
                tap_action: none
              - type: menu
            alignment: justify
          - type: horizontal-stack
            cards:
              - type: custom:mini-graph-card
                entities:
                  - sensor.bureau_temperature
                show:
                  state: true
                  name: true
                  icon: true
                name: Température
                animate: true
                point_per_hour: 0.5
                hours_to_show: 48
                color_thresholds:
                  - value: 0
                    color: '#0000FF'
                  - value: 15
                    color: '#00FFFF'
                  - value: 20
                    color: '#008000'
                  - value: 22
                    color: '#FFFF00'
                  - value: 23
                    color: '#FF8000'
                  - value: 26
                    color: '#FF0000'
                card_mod:
                  style: |
                    ha-card {
                      background-color: rgba(0,0,0,0);
                      box-shadow: none;
                      border-style: hidden;
                    }
              - type: custom:mini-graph-card
                entities:
                  - sensor.bureau_humidity
                show:
                  state: true
                  name: true
                  icon: true
                name: Humidité
                animate: true
                point_per_hour: 0.5
                hours_to_show: 48
                card_mod:
                  style: |
                    ha-card {
                      background-color: rgba(0,0,0,0);
                      box-shadow: none;
                      border-style: hidden;
                    }
          - type: horizontal-stack
            cards:
              - type: custom:button-card
                entity: switch.plafonnier_bureau
                icon: mdi:chandelier
                show_name: false
                color: grey
                state:
                  - value: 'on'
                    color: blue
                  - value: 'off'
                    color: grey
                tap_action:
                  action: toggle
                double_tap_action:
                  action: more-info
                hold_action:
                  action: more-info
                styles:
                  card:
                    - padding: 10px
                  icon:
                    - width: 35px
          - type: horizontal-stack
            cards:
              - type: custom:button-card
                entity: switch.ecoflow
                name: |
                  [[[
                    var cons = states['sensor.ecoflow_current_consumption'].state;
                    if (entity.state)
                      return "EcoFlow ("+ cons +" W)";
                    else 
                      return "EcoFlow éteint";
                    
                  ]]]
                show_icon: true
                show_state: false
                layout: icon_name
                tap_action:
                  action: toggle
                icon_color: green
                state:
                  - value: 'on'
                    icon: mdi:battery-charging
                  - value: 'off'
                    icon: mdi:battery-arrow-down-outline
                styles:
                  grid:
                    - grid-template-columns: 20% 1fr 20%
                  icon:
                    - width: 65px
                    - padding-left: 20px
                    - color: |
                        [[[ 
                          var cons = states['sensor.ecoflow_current_consumption'].state;
                          if (entity.state == "on" && cons > 0) return "red" ;
                          else if (entity.state == "on") return "green" ;
                          else return "grey"; 
                        ]]]
                  name:
                    - text-wrap: balance
                    - font-size: 1.4em
                card_mod:
                  style: |
                    ha-card {
                      background: rgba(0,0,0,0);
                      border: none;
                      box-shadow: none !important;
                    }
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-chips-card
                chips:
                  - type: template
                    content: '{{states(''sensor.proximus_b_box_external_ip'') }}'
                    icon: mdi:web
                    icon_color: >-
                      {% if states('binary_sensor.proximus_b_box_wan_status') ==
                      'on' -%}
                          green
                      {%- else  -%}
                          red
                      {%- endif %}
                alignment: start
              - type: custom:mushroom-chips-card
                chips:
                  - type: template
                    content: >-
                      {{ states('sensor.proximus_b_box_uptime') | int |
                      timestamp_custom('%dd %Hh %Ss', false) }}
                    icon: mdi:clock-time-eight-outline
                alignment: end
          - type: horizontal-stack
            cards:
              - graph: line
                type: sensor
                hours_to_show: 24
                icon: mdi:upload
                detail: 1
                entity: sensor.proximus_b_box_upload_speed
                name: Upload
                card_mod:
                  style: |
                    ha-card {
                      background-color: rgba(0,0,0,0);
                      box-shadow: none;
                      border-style: hidden;
                    }
              - graph: line
                hours_to_show: 24
                type: sensor
                detail: 1
                icon: mdi:download
                entity: sensor.proximus_b_box_download_speed
                name: Download
                card_mod:
                  style: |
                    ha-card {
                      background-color: rgba(0,0,0,0);
                      box-shadow: none;
                      border-style: hidden;
                    }
          - type: custom:mushroom-title-card
            title: Imprimante
          - type: horizontal-stack
            cards:
              - type: horizontal-stack
                cards:
                  - type: custom:button-card
                    entity: sensor.brother_hl_3140cw_series
                    name: Imprimante
                    color: gray
                    show_state: true
                    styles:
                      card:
                        - padding: 0 0 5px 0
                      icon:
                        - width: 100%
                      state:
                        - text-align: left
                        - width: 100%
                      grid:
                        - grid-template-areas: '"i c m y k" "n s s s s"'
                        - grid-template-columns: 1fr 1fr 1fr 1fr 1fr
                        - grid-template-rows: auto 1em
                      custom_fields:
                        b:
                          - width: 80%
                          - margin: auto
                        c:
                          - width: 80%
                          - margin: auto
                        m:
                          - width: 80%
                          - margin: auto
                        'y':
                          - width: 80%
                          - margin: auto
                    custom_fields:
                      k:
                        card:
                          type: custom:button-card
                          template: inkwell
                          entity: >-
                            sensor.brother_hl_3140cw_series_black_toner_cartridge
                          variables:
                            color: black
                      c:
                        card:
                          type: custom:button-card
                          template: inkwell
                          entity: sensor.brother_hl_3140cw_series_cyan_toner_cartridge
                          variables:
                            color: cyan
                      m:
                        card:
                          type: custom:button-card
                          template: inkwell
                          entity: >-
                            sensor.brother_hl_3140cw_series_magenta_toner_cartridge
                          variables:
                            color: magenta
                      'y':
                        card:
                          type: custom:button-card
                          template: inkwell
                          entity: >-
                            sensor.brother_hl_3140cw_series_yellow_toner_cartridge
                          variables:
                            color: yellow
  - title: Salle de bain
    path: salle-de-bain
    subview: false
    cards: []
    type: sections
    sections:
      - type: grid
        cards:
          - type: custom:mushroom-chips-card
            chips:
              - type: action
                icon: mdi:home-outline
                tap_action:
                  action: navigate
                  navigation_path: home
                hold_action:
                  action: none
                double_tap_action:
                  action: none
              - type: template
                content: Salle De Bain
                tap_action: none
              - type: menu
            alignment: justify
          - type: vertical-stack
            cards:
              - type: horizontal-stack
                cards:
                  - type: custom:mini-graph-card
                    entities:
                      - sensor.salle_de_bain_temperature
                    show:
                      state: true
                      name: true
                      icon: true
                    name: Température
                    animate: true
                    point_per_hour: 0.5
                    hours_to_show: 48
                    color_thresholds:
                      - value: 0
                        color: '#0000FF'
                      - value: 15
                        color: '#00FFFF'
                      - value: 20
                        color: '#008000'
                      - value: 22
                        color: '#FFFF00'
                      - value: 23
                        color: '#FF8000'
                      - value: 26
                        color: '#FF0000'
                    card_mod:
                      style: |
                        ha-card {
                          background-color: rgba(0,0,0,0);
                          box-shadow: none;
                          border-style: hidden;
                        }
                  - type: custom:mini-graph-card
                    entities:
                      - sensor.salle_de_bain_humidity
                    show:
                      state: true
                      name: true
                      icon: true
                    name: Humidité
                    animate: true
                    point_per_hour: 0.5
                    hours_to_show: 48
                    card_mod:
                      style: |
                        ha-card {
                          background-color: rgba(0,0,0,0);
                          box-shadow: none;
                          border-style: hidden;
                        }
          - type: custom:button-card
            entity: switch.ventilateur_sdb_relay
            icon: mdi:fan
            name: Extracteur
            show_name: true
            state:
              - value: 'off'
                color: grey
                styles:
                  icon:
                    - animation: null
              - value: 'on'
                color: green
                styles:
                  icon:
                    - animation: rotating 2s linear infinite
            styles:
              icon:
                - width: 60px
            tap_action:
              action: toggle
          - type: logbook
            entities:
              - switch.ventilateur_sdb_relay
  - title: Grenier
    path: grenier
    subview: false
    cards: []
    type: sections
    sections:
      - type: grid
        cards:
          - type: custom:mushroom-chips-card
            chips:
              - type: action
                icon: mdi:home-outline
                tap_action:
                  action: navigate
                  navigation_path: home
                hold_action:
                  action: none
                double_tap_action:
                  action: none
              - type: template
                content: Grenier
                tap_action: none
              - type: menu
            alignment: justify
          - type: vertical-stack
            cards:
              - type: horizontal-stack
                cards:
                  - type: custom:mini-graph-card
                    entities:
                      - sensor.grenier_temperature
                    show:
                      state: true
                      name: true
                      icon: true
                    name: Température
                    animate: true
                    point_per_hour: 0.5
                    hours_to_show: 48
                    color_thresholds:
                      - value: 0
                        color: '#0000FF'
                      - value: 15
                        color: '#00FFFF'
                      - value: 20
                        color: '#008000'
                      - value: 22
                        color: '#FFFF00'
                      - value: 23
                        color: '#FF8000'
                      - value: 26
                        color: '#FF0000'
                    card_mod:
                      style: |
                        ha-card {
                          background-color: rgba(0,0,0,0);
                          box-shadow: none;
                          border-style: hidden;
                        }
                  - type: custom:mini-graph-card
                    entities:
                      - sensor.grenier_humidity
                    show:
                      state: true
                      name: true
                      icon: true
                    name: Humidité
                    animate: true
                    point_per_hour: 0.5
                    hours_to_show: 48
                    card_mod:
                      style: |
                        ha-card {
                          background-color: rgba(0,0,0,0);
                          box-shadow: none;
                          border-style: hidden;
                        }
  - title: Buanderie
    path: buanderie
    subview: false
    cards: []
    type: sections
    sections:
      - type: grid
        cards:
          - type: custom:mushroom-chips-card
            chips:
              - type: action
                icon: mdi:home-outline
                tap_action:
                  action: navigate
                  navigation_path: home
                hold_action:
                  action: none
                double_tap_action:
                  action: none
              - type: template
                content: Buanderie
                tap_action: none
              - type: menu
            alignment: justify
          - type: vertical-stack
            cards:
              - type: horizontal-stack
                cards:
                  - type: custom:mini-graph-card
                    entities:
                      - sensor.buanderie_temperature
                    show:
                      state: true
                      name: true
                      icon: true
                    name: Température
                    animate: true
                    point_per_hour: 0.5
                    hours_to_show: 48
                    color_thresholds:
                      - value: 0
                        color: '#0000FF'
                      - value: 15
                        color: '#00FFFF'
                      - value: 20
                        color: '#008000'
                      - value: 22
                        color: '#FFFF00'
                      - value: 23
                        color: '#FF8000'
                      - value: 26
                        color: '#FF0000'
                    card_mod:
                      style: |
                        ha-card {
                          background-color: rgba(0,0,0,0);
                          box-shadow: none;
                          border-style: hidden;
                        }
                  - type: custom:mini-graph-card
                    entities:
                      - sensor.buanderie_humidity
                    show:
                      state: true
                      name: true
                      icon: true
                    name: Humidité
                    animate: true
                    point_per_hour: 0.5
                    hours_to_show: 48
                    card_mod:
                      style: |
                        ha-card {
                          background-color: rgba(0,0,0,0);
                          box-shadow: none;
                          border-style: hidden;
                        }
  - title: Hall Rez
    path: hall-rez
    subview: false
    cards: []
    type: sections
    sections:
      - type: grid
        cards:
          - type: custom:mushroom-chips-card
            chips:
              - type: action
                icon: mdi:home-outline
                tap_action:
                  action: navigate
                  navigation_path: home
                hold_action:
                  action: none
                double_tap_action:
                  action: none
              - type: template
                content: Hall Rez
                tap_action: none
              - type: menu
            alignment: justify
          - type: vertical-stack
            cards:
              - type: horizontal-stack
                cards:
                  - type: custom:mini-graph-card
                    entities:
                      - sensor.hall_rez_temperature
                    show:
                      state: true
                      name: true
                      icon: true
                    name: Température
                    animate: true
                    point_per_hour: 0.5
                    hours_to_show: 48
                    color_thresholds:
                      - value: 0
                        color: '#0000FF'
                      - value: 15
                        color: '#00FFFF'
                      - value: 20
                        color: '#008000'
                      - value: 22
                        color: '#FFFF00'
                      - value: 23
                        color: '#FF8000'
                      - value: 26
                        color: '#FF0000'
                    card_mod:
                      style: |
                        ha-card {
                          background-color: rgba(0,0,0,0);
                          box-shadow: none;
                          border-style: hidden;
                        }
                  - type: custom:mini-graph-card
                    entities:
                      - sensor.hall_rez_humidity
                    show:
                      state: true
                      name: true
                      icon: true
                    name: Humidité
                    animate: true
                    point_per_hour: 0.5
                    hours_to_show: 48
                    card_mod:
                      style: |
                        ha-card {
                          background-color: rgba(0,0,0,0);
                          box-shadow: none;
                          border-style: hidden;
                        }
  - title: Hall Etage
    path: hall-etage
    subview: false
    cards: []
    type: sections
    sections:
      - type: grid
        cards:
          - type: custom:mushroom-chips-card
            chips:
              - type: action
                icon: mdi:home-outline
                tap_action:
                  action: navigate
                  navigation_path: home
                hold_action:
                  action: none
                double_tap_action:
                  action: none
              - type: template
                content: Hall Etage
                tap_action: none
              - type: menu
            alignment: justify
          - type: vertical-stack
            cards:
              - type: horizontal-stack
                cards:
                  - type: custom:mini-graph-card
                    entities:
                      - sensor.hall_etage_temperature
                    show:
                      state: true
                      name: true
                      icon: true
                    name: Température
                    animate: true
                    point_per_hour: 0.5
                    hours_to_show: 48
                    color_thresholds:
                      - value: 0
                        color: '#0000FF'
                      - value: 15
                        color: '#00FFFF'
                      - value: 20
                        color: '#008000'
                      - value: 22
                        color: '#FFFF00'
                      - value: 23
                        color: '#FF8000'
                      - value: 26
                        color: '#FF0000'
                    card_mod:
                      style: |
                        ha-card {
                          background-color: rgba(0,0,0,0);
                          box-shadow: none;
                          border-style: hidden;
                        }
                  - type: custom:mini-graph-card
                    entities:
                      - sensor.hall_etage_humidity
                    show:
                      state: true
                      name: true
                      icon: true
                    name: Humidité
                    animate: true
                    point_per_hour: 0.5
                    hours_to_show: 48
                    card_mod:
                      style: |
                        ha-card {
                          background-color: rgba(0,0,0,0);
                          box-shadow: none;
                          border-style: hidden;
                        }
  - title: Garage
    path: garage
    subview: false
    cards: []
    type: sections
    sections:
      - type: grid
        cards:
          - type: custom:mushroom-chips-card
            chips:
              - type: action
                icon: mdi:home-outline
                tap_action:
                  action: navigate
                  navigation_path: home
                hold_action:
                  action: none
                double_tap_action:
                  action: none
              - type: template
                content: Garage
                tap_action: none
              - type: menu
            alignment: justify
          - type: vertical-stack
            cards:
              - type: horizontal-stack
                cards:
                  - type: custom:mini-graph-card
                    entities:
                      - sensor.garage_temperature
                    show:
                      state: true
                      name: true
                      icon: true
                    name: Température
                    animate: true
                    point_per_hour: 0.5
                    hours_to_show: 48
                    color_thresholds:
                      - value: 0
                        color: '#0000FF'
                      - value: 15
                        color: '#00FFFF'
                      - value: 20
                        color: '#008000'
                      - value: 22
                        color: '#FFFF00'
                      - value: 23
                        color: '#FF8000'
                      - value: 26
                        color: '#FF0000'
                    card_mod:
                      style: |
                        ha-card {
                          background-color: rgba(0,0,0,0);
                          box-shadow: none;
                          border-style: hidden;
                        }
                  - type: custom:mini-graph-card
                    entities:
                      - sensor.garage_humidity
                    show:
                      state: true
                      name: true
                      icon: true
                    name: Humidité
                    animate: true
                    point_per_hour: 0.5
                    hours_to_show: 48
                    card_mod:
                      style: |
                        ha-card {
                          background-color: rgba(0,0,0,0);
                          box-shadow: none;
                          border-style: hidden;
                        }
      - type: grid
        cards:
          - type: custom:button-card
            entity: sensor.garage_door_position
            tap_action:
              action: toggle
              entity: button.garage_door
            state:
              - value: '0.0'
                operator: '=='
                name: Porte de garage fermée
                color: green
                icon: mdi:garage-variant
              - value: '1.0'
                operator: '=='
                name: Porte de garage en mouvement
                color: orange
                icon: mdi:garage-alert-variant
                styles:
                  icon:
                    - animation: blink 2s ease infinite
              - value: '2.0'
                operator: '=='
                name: Porte de garage ouverte
                color: red
                icon: mdi:garage-open-variant
          - show_state: false
            show_name: false
            camera_view: live
            type: picture-entity
            entity: camera.tapo_c100_1_hd_stream
            tap_action:
              action: none
            hold_action:
              action: none
          - type: custom:mushroom-template-card
            entity: binary_sensor.tapo_c100_1_cell_motion_detection
            icon: mdi:human
            icon_color: >-
              {% if
              is_state('binary_sensor.tapo_c100_1_cell_motion_detection','on')
              -%}
                green
              {%- else -%}
                grey
              {%- endif %}
            tap_action:
              action: none
            hold_action:
              action: none
            double_tap_action:
              action: none
            fill_container: true
            layout: horizontal
            primary: >-
              {% if
              is_state('binary_sensor.tapo_c100_1_cell_motion_detection','on')
              -%}
                Activité détectée
              {%- else -%}
                Aucune activité
              {%- endif %}
            secondary: '{% states(''binary_sensor.tapo_c100_1_cell_motion_detection'') %}'
          - type: gauge
            name: Citerne
            needle: true
            severity:
              green: 2000
              yellow: 1000
              red: 0
            entity: sensor.water_tank_level_litres
            max: 5000
            unit: L
    max_columns: 4
    icon: ''
  - title: Cave Hall
    path: cave-hall
    subview: false
    cards: []
    type: sections
    sections:
      - type: grid
        cards:
          - type: custom:mushroom-chips-card
            chips:
              - type: action
                icon: mdi:home-outline
                tap_action:
                  action: navigate
                  navigation_path: home
                hold_action:
                  action: none
                double_tap_action:
                  action: none
              - type: template
                content: Cave Hall
                tap_action: none
              - type: menu
            alignment: justify
          - type: vertical-stack
            cards:
              - type: horizontal-stack
                cards:
                  - type: custom:mini-graph-card
                    entities:
                      - sensor.cave_temperature
                    show:
                      state: true
                      name: true
                      icon: true
                    name: Température
                    animate: true
                    point_per_hour: 0.5
                    hours_to_show: 48
                    color_thresholds:
                      - value: 0
                        color: '#0000FF'
                      - value: 15
                        color: '#00FFFF'
                      - value: 20
                        color: '#008000'
                      - value: 22
                        color: '#FFFF00'
                      - value: 23
                        color: '#FF8000'
                      - value: 26
                        color: '#FF0000'
                    card_mod:
                      style: |
                        ha-card {
                          background-color: rgba(0,0,0,0);
                          box-shadow: none;
                          border-style: hidden;
                        }
                  - type: custom:mini-graph-card
                    entities:
                      - sensor.cave_humidity
                    show:
                      state: true
                      name: true
                      icon: true
                    name: Humidité
                    animate: true
                    point_per_hour: 0.5
                    hours_to_show: 48
                    card_mod:
                      style: |
                        ha-card {
                          background-color: rgba(0,0,0,0);
                          box-shadow: none;
                          border-style: hidden;
                        }
  - title: Cave Milieu
    path: cave-milieu
    subview: false
    cards: []
    type: sections
    sections:
      - type: grid
        cards:
          - type: custom:mushroom-chips-card
            chips:
              - type: action
                icon: mdi:home-outline
                tap_action:
                  action: navigate
                  navigation_path: home
                hold_action:
                  action: none
                double_tap_action:
                  action: none
              - type: template
                content: Cave Milieu
                tap_action: none
              - type: menu
            alignment: justify
          - type: vertical-stack
            cards:
              - type: horizontal-stack
                cards:
                  - type: custom:mini-graph-card
                    entities:
                      - sensor.cave_milieu_temperature
                    show:
                      state: true
                      name: true
                      icon: true
                    name: Température
                    animate: true
                    point_per_hour: 0.5
                    hours_to_show: 48
                    color_thresholds:
                      - value: 0
                        color: '#0000FF'
                      - value: 15
                        color: '#00FFFF'
                      - value: 20
                        color: '#008000'
                      - value: 22
                        color: '#FFFF00'
                      - value: 23
                        color: '#FF8000'
                      - value: 26
                        color: '#FF0000'
                    card_mod:
                      style: |
                        ha-card {
                          background-color: rgba(0,0,0,0);
                          box-shadow: none;
                          border-style: hidden;
                        }
                  - type: custom:mini-graph-card
                    entities:
                      - sensor.cave_milieu_humidity
                    show:
                      state: true
                      name: true
                      icon: true
                    name: Humidité
                    animate: true
                    point_per_hour: 0.5
                    hours_to_show: 48
                    card_mod:
                      style: |
                        ha-card {
                          background-color: rgba(0,0,0,0);
                          box-shadow: none;
                          border-style: hidden;
                        }
  - title: Cave Détente
    path: cave-detente
    subview: false
    cards: []
    type: sections
    sections:
      - type: grid
        cards:
          - type: custom:mushroom-chips-card
            chips:
              - type: action
                icon: mdi:home-outline
                tap_action:
                  action: navigate
                  navigation_path: home
                hold_action:
                  action: none
                double_tap_action:
                  action: none
              - type: template
                content: Cave Detente
                tap_action: none
              - type: menu
            alignment: justify
          - type: vertical-stack
            cards:
              - type: horizontal-stack
                cards:
                  - type: custom:mini-graph-card
                    entities:
                      - sensor.cave_detente_temperature
                    show:
                      state: true
                      name: true
                      icon: true
                    name: Température
                    animate: true
                    point_per_hour: 0.5
                    hours_to_show: 48
                    color_thresholds:
                      - value: 0
                        color: '#0000FF'
                      - value: 15
                        color: '#00FFFF'
                      - value: 20
                        color: '#008000'
                      - value: 22
                        color: '#FFFF00'
                      - value: 23
                        color: '#FF8000'
                      - value: 26
                        color: '#FF0000'
                    card_mod:
                      style: |
                        ha-card {
                          background-color: rgba(0,0,0,0);
                          box-shadow: none;
                          border-style: hidden;
                        }
                  - type: custom:mini-graph-card
                    entities:
                      - sensor.cave_detente_humidity
                    show:
                      state: true
                      name: true
                      icon: true
                    name: Humidité
                    animate: true
                    point_per_hour: 0.5
                    hours_to_show: 48
                    card_mod:
                      style: |
                        ha-card {
                          background-color: rgba(0,0,0,0);
                          box-shadow: none;
                          border-style: hidden;
                        }
      - type: grid
        cards:
          - type: picture-elements
            elements:
              - type: conditional
                conditions:
                  - condition: state
                    state_not: unavailable
                    entity: sensor.bambulab_fred_p1s_ams_1_id
                  - condition: state
                    state_not: unknown
                    entity: sensor.bambulab_fred_p1s_ams_1_id
                elements:
                  - type: state-label
                    entity: sensor.bambulab_fred_p1s_ams_1_id
                    tap_action:
                      action: none
                    style:
                      top: 77%
                      left: 9.6%
                      text-align: center
                      font-size: 0.84em
                      background-color: rgba(0,0,0,0)
                      box-shadow: 0 0 3px 3px rgba(0, 0, 0, 0)
                      border-radius: 10px
                      pointer-events: none
                      color: '#FFFFFF'
              - type: state-label
                entity: sensor.bambulab_fred_p1s_ams_1_tray_1
                tap_action:
                  action: none
                style:
                  top: 28%
                  left: 21.5%
                  text-align: center
                  font-size: 0em
                  background-color: var(--tray_1_color)
                  opacity: 90%
                  box-shadow: 0 0 3px 3px var(--tray_1_bg)
                  border-radius: 2px
                  width: 14%
                  height: 40%
                  pointer-events: none
              - type: custom:config-template-card
                entities:
                  - sensor.bambulab_fred_p1s_ams_1_tray_1
                element:
                  type: state-icon
                  entity: sensor.bambulab_fred_p1s_ams_1_tray_1
                  icon: mdi:numeric-1-circle
                style:
                  top: 28%
                  left: 21.4%
                  '--paper-item-icon-color': white
                  background-color: rgba(0,0,0,0.5)
                  box-shadow: 0 0 5px 5px var(--tray_1_bg)
                  border-radius: 50px
                  '--mdc-icon-size': 2.4em
              - type: state-label
                entity: sensor.bambulab_fred_p1s_ams_1_tray_1
                attribute: type
                tap_action:
                  action: none
                style:
                  top: 77%
                  left: 21%
                  text-align: center
                  font-size: 1em
                  background-color: rgba(0,0,0,0.4)
                  box-shadow: 0 0 5px 5px rgba(0, 0, 0, 0.4)
                  border-radius: 50px
                  pointer-events: none
                  color: '#FFFFFF'
              - type: state-label
                entity: sensor.bambulab_fred_p1s_ams_1_tray_2
                tap_action:
                  action: none
                style:
                  top: 28%
                  left: 39.65%
                  text-align: center
                  font-size: 0em
                  background-color: var(--tray_2_color)
                  opacity: 90%
                  box-shadow: 0 0 3px 3px var(--tray_2_bg)
                  border-radius: 2px
                  width: 14%
                  height: 40%
                  pointer-events: none
              - type: custom:config-template-card
                entities:
                  - sensor.bambulab_fred_p1s_ams_1_tray_2
                element:
                  type: state-icon
                  entity: sensor.bambulab_fred_p1s_ams_1_tray_2
                  icon: mdi:numeric-2-circle
                style:
                  top: 28%
                  left: 39.7%
                  '--paper-item-icon-color': white
                  background-color: rgba(0,0,0,0.5)
                  box-shadow: 0 0 5px 5px  var(--tray_2_bg)
                  border-radius: 50px
                  '--mdc-icon-size': 2.4em
              - type: state-label
                entity: sensor.bambulab_fred_p1s_ams_1_tray_2
                attribute: type
                tap_action:
                  action: none
                style:
                  top: 77%
                  left: 40%
                  text-align: center
                  font-size: 1em
                  background-color: rgba(0,0,0,0.4)
                  box-shadow: 0 0 5px 5px rgba(0, 0, 0, 0.4)
                  border-radius: 50px
                  pointer-events: none
                  color: '#FFFFFF'
              - type: state-label
                entity: sensor.bambulab_fred_p1s_ams_1_tray_3
                tap_action:
                  action: none
                style:
                  top: 28%
                  left: 59.65%
                  text-align: center
                  font-size: 0em
                  background-color: var(--tray_3_color)
                  opacity: 90%
                  box-shadow: 0 0 3px 3px var(--tray_3_bg)
                  border-radius: 2px
                  width: 14%
                  height: 40%
                  pointer-events: none
              - type: custom:config-template-card
                entities:
                  - sensor.bambulab_fred_p1s_ams_1_tray_3
                element:
                  type: state-icon
                  entity: sensor.bambulab_fred_p1s_ams_1_tray_3
                  icon: mdi:numeric-3-circle
                style:
                  top: 28%
                  left: 59.7%
                  '--paper-item-icon-color': white
                  background-color: rgba(0,0,0,0.5)
                  box-shadow: 0 0 5px 5px  var(--tray_3_bg)
                  border-radius: 50px
                  '--mdc-icon-size': 2.4em
              - type: state-label
                entity: sensor.bambulab_fred_p1s_ams_1_tray_3
                attribute: type
                tap_action:
                  action: none
                style:
                  top: 77%
                  left: 60%
                  text-align: center
                  font-size: 1em
                  background-color: rgba(0,0,0,0.4)
                  box-shadow: 0 0 5px 5px rgba(0, 0, 0, 0.4)
                  border-radius: 50px
                  pointer-events: none
                  color: '#FFFFFF'
              - type: state-label
                entity: sensor.bambulab_fred_p1s_ams_1_tray_4
                tap_action:
                  action: none
                style:
                  top: 28%
                  left: 79.4%
                  text-align: center
                  font-size: 0em
                  background-color: var(--tray_4_color)
                  opacity: 90%
                  box-shadow: 0 0 3px 3px var(--tray_4_bg)
                  border-radius: 2px
                  width: 14%
                  height: 40%
                  pointer-events: none
              - type: custom:config-template-card
                entities:
                  - sensor.bambulab_fred_p1s_ams_1_tray_4
                element:
                  type: state-icon
                  entity: sensor.bambulab_fred_p1s_ams_1_tray_4
                  icon: mdi:numeric-4-circle
                style:
                  top: 28%
                  left: 79.6%
                  '--paper-item-icon-color': white
                  background-color: rgba(0,0,0,0.5)
                  box-shadow: 0 0 5px 5px var(--tray_4_bg)
                  border-radius: 50px
                  '--mdc-icon-size': 2.4em
              - type: state-label
                entity: sensor.bambulab_fred_p1s_ams_1_tray_4
                attribute: type
                tap_action:
                  action: none
                style:
                  top: 77%
                  left: 79.6%
                  text-align: center
                  font-size: 1em
                  background-color: rgba(0,0,0,0.4)
                  box-shadow: 0 0 5px 5px rgba(0, 0, 0, 0.4)
                  border-radius: 50px
                  pointer-events: none
                  color: '#FFFFFF'
              - type: conditional
                conditions:
                  - entity: sensor.bambulab_fred_p1s_print_status
                    state_not: offline
                elements:
                  - type: conditional
                    conditions:
                      - entity: sensor.bambulab_fred_p1s_ams_1_ams_temperature
                        state_not:
                          - unavailable
                          - unknown
                    elements:
                      - entity: sensor.bambulab_fred_p1s_ams_1_ams_temperature
                        type: state-badge
                        style:
                          top: 50.75%
                          left: 8%
                          font-size: 0.75em
                          color: rgba(0,0,0,0)
              - type: custom:config-template-card
                entities:
                  - sensor.bambulab_fred_p1s_ams_1_humidity_index
                element:
                  type: state-icon
                  entity: sensor.bambulab_fred_p1s_ams_1_humidity_index
                  icon: >-
                    ${'fapro:humidity-level-dark-' +
                    states['sensor.bambulab_fred_p1s_ams_1_humidity_index'].state
                    + '#fullcolor'}
                style:
                  top: 38.5%
                  left: 92.5%
                  background-color: '#1c1c1c'
                  border-radius: 50px
                  border: 0.12em solid var(--humidity-border-color)
                  '--mdc-icon-size': 2.05em
            image: /local/media/bambuprinter/AMS_2.png
            card_mod:
              style: |
                ha-card {
                  background: none !important;
                  border: none !important;
                  box-shadow: none !important;
                  --humidity-border-color: {% if states('sensor.bambulab_fred_p1s_ams_1_humidity_index')  != 'unavailable' and states('sensor.bambulab_fred_p1s_ams_1_humidity_index') | int > 3 %} rgba(255, 255, 126, 0.5); {% elif states('sensor.bambulab_fred_p1s_ams_1_humidity_index')  != 'unavailable' and states('sensor.bambulab_fred_p1s_ams_1_humidity_index') | int > 1 %} rgba(228,127,97,1.0); {% else %} rgba(194,74,72,1.0); {% endif %}
                  --tray_1_color: {% if is_state_attr('sensor.bambulab_fred_p1s_ams_1_tray_1', 'color', '#00000000') %} rgb(255, 255, 255); {% else %} {{state_attr('sensor.bambulab_fred_p1s_ams_1_tray_1', 'color') }}; {% endif %}
                  --tray_2_color: {% if is_state_attr('sensor.bambulab_fred_p1s_ams_1_tray_2', 'color', '#00000000') %} rgb(255, 255, 255); {% else %} {{state_attr('sensor.bambulab_fred_p1s_ams_1_tray_2', 'color') }}; {% endif %}
                  --tray_3_color: {% if is_state_attr('sensor.bambulab_fred_p1s_ams_1_tray_3', 'color', '#00000000') %} rgb(255, 255, 255); {% else %} {{state_attr('sensor.bambulab_fred_p1s_ams_1_tray_3', 'color') }}; {% endif %}
                  --tray_4_color: {% if is_state_attr('sensor.bambulab_fred_p1s_ams_1_tray_4', 'color', '#00000000') %} rgb(255, 255, 255); {% else %} {{state_attr('sensor.bambulab_fred_p1s_ams_1_tray_4', 'color') }}; {% endif %}
                  --tray_1_bg: {% if is_state_attr('sensor.bambulab_fred_p1s_ams_1_tray_1', 'active', true) %} rgba(255, 255, 126, 0.5); {% else %} rgba(0,0,0,0.5); {% endif %}
                  --tray_2_bg: {% if is_state_attr('sensor.bambulab_fred_p1s_ams_1_tray_2', 'active', true) %} rgba(255, 255, 126, 0.5); {% else %} rgba(0,0,0,0.5); {% endif %}
                  --tray_3_bg: {% if is_state_attr('sensor.bambulab_fred_p1s_ams_1_tray_3', 'active', true) %} rgba(255, 255, 126, 0.5); {% else %} rgba(0,0,0,0.5); {% endif %}
                  --tray_4_bg: {% if is_state_attr('sensor.bambulab_fred_p1s_ams_1_tray_4', 'active', true) %} rgba(255, 255, 126, 0.5); {% else %} rgba(0,0,0,0.5); {% endif %}
                }
          - type: picture-elements
            elements:
              - type: conditional
                conditions:
                  - entity: sensor.bambulab_fred_p1s_print_status
                    state_not: offline
                elements:
                  - type: custom:config-template-card
                    entities:
                      - sensor.bambulab_fred_p1s_wi_fi_signal
                    element:
                      type: state-icon
                      entity: sensor.bambulab_fred_p1s_wi_fi_signal
                      icon: >-
                        ${states['sensor.bambulab_fred_p1s_wi_fi_signal'].state
                        > -50 ? 'mdi:wifi-strength-4' :
                          states['sensor.bambulab_fred_p1s_wi_fi_signal'].state > -60 ?
                        'mdi:wifi-strength-3' :
                          states['sensor.bambulab_fred_p1s_wi_fi_signal'].state > -67 ?
                        'mdi:wifi-strength-2' :
                          states['sensor.bambulab_fred_p1s_wi_fi_signal'].state > -70 ?
                        'mdi:wifi-strength-1-alert' :
                        'mdi:wifi-strength-outline'}
                    style:
                      left: 67%
                      top: 13.2%
                      font-size: 0.8em
                      color: rgba(0,0,0,0)
                      '--paper-item-icon-color': >-
                        ${states['sensor.bambulab_fred_p1s_wi_fi_signal'].state
                        > -50 ? 'green' :
                          states['sensor.bambulab_fred_p1s_wi_fi_signal'].state > -60 ?
                        'yellow' :
                          states['sensor.bambulab_fred_p1s_wi_fi_signal'].state > -67 ?
                        'orange' :
                          states['sensor.bambulab_fred_p1s_wi_fi_signal'].state > -70 ?
                        'red' : 'red'}
                  - entity: light.bambulab_fred_p1s_chamber_light
                    type: state-icon
                    style:
                      top: 46%
                      left: 18%
                      '--mdc-icon-size': 2.6em
                    tap_action:
                      action: toggle
                  - entity: sensor.bambulab_fred_p1s_print_status
                    type: state-label
                    style:
                      top: 6.5%
                      left: 23.69%
                      font-size: 1em
                      color: '#FFFFFF'
                  - type: conditional
                    conditions:
                      - entity: sensor.bambulab_fred_p1s_print_status
                        state:
                          - running
                          - pause
                    elements:
                      - type: conditional
                        conditions:
                          - entity: image.bambulab_fred_p1s_cover_image
                            state_not: unavailable
                        elements:
                          - type: custom:hui-element
                            card_type: picture-entity
                            show_name: false
                            show_state: false
                            entity: image.bambulab_fred_p1s_cover_image
                            style:
                              top: 50%
                              left: 50%
                              transform: translate(-45%, -40%) scale(75%, 75%)
                              '--ha-card-border-width': 0px
                              '--ha-card-background': none
                      - entity: sensor.bambulab_fred_p1s_print_progress
                        type: state-badge
                        tap_action:
                          action: none
                        style:
                          top: 18.5%
                          left: 81%
                          font-size: 1em
                          color: rgba(0,0,0,0)
                          '--label-badge-red': '#11739D'
                  - entity: sensor.bambulab_fred_p1s_nozzle_temperature
                    type: state-badge
                    style:
                      top: 31%
                      left: 51%
                      font-size: 0.8em
                      color: rgba(0,0,0,0)
                  - entity: sensor.bambulab_fred_p1s_bed_temperature
                    type: state-badge
                    style:
                      top: 78%
                      left: 51%
                      font-size: 0.8em
                      color: rgba(0,0,0,0)
                  - type: conditional
                    conditions:
                      - entity: sensor.bambulab_fred_p1s_chamber_temperature
                        state_not:
                          - unavailable
                          - unknown
                    elements:
                      - entity: sensor.bambulab_fred_p1s_chamber_temperature
                        type: state-badge
                        style:
                          font-size: 0.8em
                          top: 31%
                          left: 19%
                          color: rgba(0,0,0,0)
            card_mod:
              style: |
                ha-card {
                  box-shadow: none !important;
                  background: none !important;
                  border: none !important;
                }
            image: /local/media/bambuprinter/on_p1s.png
            entity: light.bambu_fred_p1s_chamber_light
            state_image:
              unavailable: /local/media/bambuprinter/off_p1s.png
              'on': /local/media/bambuprinter/on_p1s.png
              'off': /local/media/bambuprinter/off_p1s.png
          - type: vertical-stack
            cards:
              - type: vertical-stack
                cards:
                  - type: custom:mushroom-title-card
                    title: ''
                    subtitle: Print Details
                    alignment: center
                  - type: custom:mushroom-entity-card
                    entity: sensor.bambulab_fred_p1s_task_name
                    name: Task
                    icon: mdi:clipboard-text
                  - type: horizontal-stack
                    cards:
                      - type: custom:mushroom-entity-card
                        entity: sensor.bambulab_fred_p1s_print_progress
                        name: Progress
                        icon: mdi:progress-helper
                      - type: custom:mushroom-template-card
                        primary: Layer
                        icon_color: var(--rgb-state-entity)
                        secondary: >-
                          {{states('sensor.bambulab_fred_p1s_current_layer')}} /
                          {{states('sensor.bambulab_fred_p1s_total_layer_count')}}
                        icon: mdi:layers
      - type: grid
        cards:
          - type: vertical-stack
            cards:
              - type: custom:button-card
                entity: switch.bambulab
                name: BambuLab Fred P1S
                icon: mdi:printer-3d
                show_icon: true
                show_state: false
                layout: icon_name
                tap_action:
                  action: |
                    [[[
                      if (entity) return 'toggle';
                      else return 'none';
                    ]]]
                confirmation:
                  text: Toggle Printer Power?
                state:
                  - value: 'on'
                    icon: mdi:power
                    color: green
                  - value: 'off'
                    icon: mdi:power
                    color: grey
                styles:
                  grid:
                    - grid-template-columns: |
                        [[[
                          if (entity) return '20% 1fr 20%';
                          else return '20% 1fr 20%';
                        ]]]
                  icon:
                    - width: |
                        [[[
                          if (entity) return '65px';
                          else return '0px';
                        ]]]
                    - padding-left: 20px
                  name:
                    - text-wrap: balance
                    - font-size: 1.4em
                card_mod:
                  style: |
                    ha-card {
                      background: rgba(0,0,0,0);
                      border: none;
                      box-shadow: none !important;
                    }
              - type: custom:gap-card
                height: 5
              - type: custom:hui-element
                card_type: horizontal-stack
                cards:
                  - type: custom:hui-element
                    card_type: button
                    entity: select.bambulab_fred_p1s_printing_speed
                    name: Silent
                    icon: mdi:speedometer-slow
                    tap_action:
                      action: call-service
                      service: select.select_option
                      data:
                        option: silent
                      target:
                        entity_id: select.bambulab_fred_p1s_printing_speed
                    card_mod:
                      style: |
                        ha-card {
                          box-shadow: none !important;
                          background-color: rgba(0,0,0,0);
                          border: none;
                          --pbs-button-color: {% if is_state('select.bambulab_fred_p1s_printing_speed', 'Silent') or is_state('select.bambulab_fred_p1s_printing_speed', 'silent') %} yellow; {% else %} grey; {% endif %}
                          --paper-item-icon-color: {% if is_state('select.bambulab_fred_p1s_printing_speed', 'Silent') or is_state('select.bambulab_fred_p1s_printing_speed', 'silent') %} yellow; {% else %} grey; {% endif %}
                        }
                  - type: custom:hui-element
                    card_type: button
                    entity: select.bambulab_fred_p1s_printing_speed
                    name: Standard
                    icon: mdi:speedometer-medium
                    tap_action:
                      action: call-service
                      service: select.select_option
                      data:
                        option: standard
                      target:
                        entity_id: select.bambulab_fred_p1s_printing_speed
                    card_mod:
                      style: |
                        ha-card {
                          box-shadow: none !important;
                          background-color: rgba(0,0,0,0);
                          border: none;
                          --paper-item-icon-color: {% if is_state('select.bambulab_fred_p1s_printing_speed', 'Standard') or is_state('select.bambulab_fred_p1s_printing_speed', 'standard') %} yellow; {% else %} grey; {% endif %}
                        }
                  - type: custom:hui-element
                    card_type: button
                    entity: select.bambulab_fred_p1s_printing_speed
                    name: Sport
                    icon: mdi:speedometer
                    tap_action:
                      action: call-service
                      service: select.select_option
                      data:
                        option: sport
                      target:
                        entity_id: select.bambulab_fred_p1s_printing_speed
                    card_mod:
                      style: |
                        ha-card {
                          box-shadow: none !important;
                          background-color: rgba(0,0,0,0);
                          border: none;
                          --paper-item-icon-color: {% if is_state('select.bambulab_fred_p1s_printing_speed', 'Sport') or is_state('select.bambulab_fred_p1s_printing_speed', 'sport') %} yellow; {% else %} grey; {% endif %}
                        }
                  - type: custom:hui-element
                    card_type: button
                    entity: select.bambulab_fred_p1s_printing_speed
                    name: Ludicrous
                    icon: mdi:speedometer
                    tap_action:
                      action: call-service
                      service: select.select_option
                      data:
                        option: ludicrous
                      target:
                        entity_id: select.bambulab_fred_p1s_printing_speed
                    card_mod:
                      style: |
                        ha-card {
                          box-shadow: none !important;
                          background-color: rgba(0,0,0,0);
                          border: none;
                          --paper-item-icon-color: {% if is_state('select.bambulab_fred_p1s_printing_speed', 'Ludicrous') or is_state('select.bambulab_fred_p1s_printing_speed', 'ludicrous') %} yellow; {% else %} grey; {% endif %}
                        }
              - type: custom:gap-card
                height: 5
              - type: custom:hui-element
                card_type: horizontal-stack
                cards:
                  - type: custom:button-card
                    variables:
                      pause_entity: button.bambulab_fred_p1s_pause_printing
                      start_entity: button.bambulab_fred_p1s_resume_printing
                    entity: sensor.bambulab_fred_p1s_print_status
                    name: >
                      [[[  if (entity.state.toUpperCase() == 'RUNNING') return
                      "Pause";
                       else if (entity.state.toUpperCase() == 'PAUSE') return "Resume";
                      else return '';  ]]]
                    state:
                      - value: RUNNING
                        icon: mdi:pause
                        color: orange
                      - value: running
                        icon: mdi:pause
                        color: orange
                      - value: PAUSE
                        icon: mdi:play
                        color: orange
                      - value: pause
                        icon: mdi:play
                        color: orange
                      - value: OFFLINE
                        icon: mdi:void
                        color: grey
                      - value: offline
                        icon: mdi:void
                        color: grey
                      - value: IDLE
                        icon: mdi:void
                        color: grey
                      - value: idle
                        icon: mdi:void
                        color: grey
                      - value: FAILED
                        icon: mdi:void
                        color: grey
                      - value: failed
                        icon: mdi:void
                        color: grey
                      - value: FINISH
                        icon: mdi:void
                        color: grey
                      - value: finish
                        icon: mdi:void
                        color: grey
                      - value: PREPARE
                        icon: mdi:void
                        color: grey
                      - value: prepare
                        icon: mdi:void
                        color: grey
                    tap_action:
                      action: >
                        [[[ if (entity.state.toUpperCase() == 'RUNNING' ||
                        entity.state.toUpperCase() == 'PAUSE') return
                        "call-service"; 

                        else return "none";

                        ]]]
                      service: button.press
                      service_data:
                        entity_id: >
                          [[[ if
                          (states['sensor.bambulab_fred_p1s_print_status'].state.toUpperCase()
                          == 'RUNNING') 
                              return variables.pause_entity; 
                              if (states['sensor.bambulab_fred_p1s_print_status'].state.toUpperCase() == 'PAUSE') 
                              return variables.start_entity; 
                            else return "";
                            ]]]
                    card_mod:
                      style: |
                        ha-card {
                          box-shadow: none !important;
                          background-color: rgba(0,0,0,0);
                          border: none;
                          --paper-item-icon-color: {% if is_state('sensor.bambulab_fred_p1s_print_status', 'RUNNING') or is_state('sensor.bambulab_fred_p1s_print_status', 'PAUSE') or is_state('sensor.bambulab_fred_p1s_print_status', 'running') or is_state('sensor.bambulab_fred_p1s_print_status', 'pause') %} orange; {% else %} grey; {% endif %}    
                        }
                  - type: custom:gap-card
                  - type: custom:button-card
                    entity: sensor.bambulab_fred_p1s_print_status
                    name: >
                      [[[  if (entity.state.toUpperCase() == 'RUNNING') return
                      "Cancel";
                       else if (entity.state.toUpperCase() =='PAUSE') return "Cancel";
                      else return '';  ]]]
                    confirmation:
                      text: Cancel Print?
                    state:
                      - value: RUNNING
                        icon: mdi:cancel
                        color: red
                      - value: running
                        icon: mdi:cancel
                        color: red
                      - value: PAUSE
                        icon: mdi:cancel
                        color: red
                      - value: pause
                        icon: mdi:cancel
                        color: red
                      - value: OFFLINE
                        icon: mdi:void
                        color: grey
                      - value: offline
                        icon: mdi:void
                        color: grey
                      - value: IDLE
                        icon: mdi:void
                        color: grey
                      - value: idle
                        icon: mdi:void
                        color: grey
                      - value: FAILED
                        icon: mdi:void
                        color: grey
                      - value: failed
                        icon: mdi:void
                        color: grey
                      - value: FINISH
                        icon: mdi:void
                        color: grey
                      - value: finish
                        icon: mdi:void
                        color: grey
                      - value: PREPARE
                        icon: mdi:void
                        color: grey
                      - value: prepare
                        icon: mdi:void
                        color: grey
                    tap_action:
                      action: >
                        [[[ if (entity.state.toUpperCase() == 'RUNNING' ||
                        entity.state.toUpperCase() == 'PAUSE') return
                        "call-service";  else return "none"; ]]]
                      service: button.press
                      service_data:
                        entity_id: button.bambulab_fred_p1s_stop_printing
                    card_mod:
                      style: |
                        ha-card {
                          box-shadow: none !important;
                          background-color: rgba(0,0,0,0);
                          border: none;
                          --paper-item-icon-color: {% if is_state('sensor.bambulab_fred_p1s_print_status', 'RUNNING') or is_state('sensor.bambulab_fred_p1s_print_status', 'PAUSE') or is_state('sensor.bambulab_fred_p1s_print_status', 'running') or is_state('sensor.bambulab_fred_p1s_print_status', 'pause') %} red; {% else %} grey; {% endif %}
                        }
          - type: vertical-stack
            cards:
              - type: conditional
                conditions:
                  - condition: state
                    entity: fan.bambulab_fred_p1s_aux_fan
                    state_not: unavailable
                  - condition: state
                    entity: sensor.bambulab_fred_p1s_aux_fan
                    state_not: unknown
                card:
                  type: custom:mushroom-fan-card
                  entity: fan.bambulab_fred_p1s_aux_fan
                  name: Aux Fan
                  icon_animation: true
                  show_percentage_control: true
                  fill_container: false
                  layout: horizontal
              - type: conditional
                card:
                  type: custom:mushroom-fan-card
                  entity: fan.bambulab_fred_p1s_chamber_fan
                  name: Chamber Fan
                  icon_animation: true
                  show_percentage_control: true
                  fill_container: false
                  layout: horizontal
                conditions:
                  - condition: state
                    entity: fan.bambulab_fred_p1s_chamber_fan
                    state_not: unavailable
                  - condition: state
                    entity: sensor.bambulab_fred_p1s_chamber_fan
                    state_not: unknown
              - type: conditional
                card:
                  type: custom:mushroom-fan-card
                  entity: fan.bambulab_fred_p1s_cooling_fan
                  name: Part Cooling Fan
                  icon_animation: true
                  show_percentage_control: true
                  fill_container: false
                  layout: horizontal
                conditions:
                  - condition: state
                    entity: fan.bambulab_fred_p1s_cooling_fan
                    state_not: unavailable
                  - condition: state
                    entity: sensor.bambulab_fred_p1s_cooling_fan
                    state_not: unknown
              - type: conditional
                card:
                  type: custom:mushroom-number-card
                  entity: sensor.bambulab_fred_p1s_nozzle_temperature
                  name: Set Nozzle Temp
                  layout: horizontal
                  display_mode: buttons
                conditions:
                  - condition: state
                    entity: sensor.bambulab_fred_p1s_nozzle_temperature
                    state_not: unavailable
              - type: conditional
                card:
                  type: custom:mushroom-number-card
                  entity: sensor.bambulab_fred_p1s_bed_temperature
                  name: Set Bed Temp
                  display_mode: buttons
                  layout: horizontal
                conditions:
                  - condition: state
                    entity: sensor.bambulab_fred_p1s_bed_temperature
                    state_not: unavailable
      - type: grid
        cards:
          - type: grid
            square: false
            columns: 1
            cards:
              - type: entities
                entities:
                  - switch.bambulab_fred_p1s_enable_camera
              - show_state: false
                show_name: false
                camera_view: live
                type: picture-entity
                entity: camera.bambulab_fred_p1s_camera
                tap_action:
                  action: none
                hold_action:
                  action: none
                camera_image: camera.bambulab_fred_p1s_camera
          - type: custom:tabbed-card
            options: {}
            tabs:
              - card:
                  type: vertical-stack
                  cards:
                    - type: entities
                      entities:
                        - entity: sensor.bambulab_fred_p1s_current_stage
                          name: Stage
                        - entity: binary_sensor.bambulab_fred_p1s_hms_errors
                          name: HMS Notifications
                        - entity: sensor.bambulab_fred_p1s_start_time
                          name: Start Time
                          secondary_info: last-changed
                        - entity: sensor.bambulab_fred_p1s_end_time
                          name: End Time
                        - entity: sensor.bambulab_fred_p1s_remaining_time
                          name: Remaining Time
                        - entity: binary_sensor.bambulab_fred_p1s_firmware_update
                          name: Firmware
                        - entity: sensor.bambulab_fred_p1s_active_tray
                          name: Current Filament
                attributes:
                  label: Details
  - title: Remote
    path: remote
    subview: false
    cards: []
    type: sections
    sections:
      - type: grid
        cards:
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-chips-card
                chips:
                  - type: action
                    icon: mdi:home-outline
                    tap_action:
                      action: navigate
                      navigation_path: home
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                    alignment: start
              - type: custom:mushroom-chips-card
                chips:
                  - type: entity
                    entity: sensor.salon_temperature
                alignment: center
              - type: custom:mushroom-chips-card
                chips:
                  - type: entity
                    entity: sensor.salon_humidity
                alignment: center
              - type: custom:mushroom-chips-card
                chips:
                  - type: menu
                alignment: end
          - type: vertical-stack
            cards:
              - square: false
                type: grid
                columns: 5
                cards:
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - icon: mdi:arrow-left
                      - tap_command: BACK
                      - hold_command: BACK
                      - hold_secs: 0.5
                  - type: custom:decluttering-card
                    template: remote_button_empty
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - icon: mdi:arrow-up-bold
                      - tap_command: DPAD_UP
                  - type: custom:decluttering-card
                    template: remote_button_empty
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - icon: mdi:home
                      - tap_command: HOME
                      - hold_command: HOME
                      - hold_secs: 0.5
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - icon: mdi:rewind
                      - tap_command: MEDIA_PREVIOUS
                      - hold_command: MEDIA_REWIND
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - icon: mdi:arrow-left-bold
                      - tap_command: DPAD_LEFT
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - icon: mdi:circle
                      - tap_command: DPAD_CENTER
                      - hold_command: DPAD_CENTER
                      - hold_secs: 0.5
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - icon: mdi:arrow-right-bold
                      - tap_command: DPAD_RIGHT
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - icon: mdi:fast-forward
                      - tap_command: MEDIA_NEXT
                      - hold_command: MEDIA_FAST_FORWARD
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - icon: mdi:play-pause
                      - tap_command: MEDIA_PLAY_PAUSE
                      - hold_command: MEDIA_STOP
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - icon: mdi:volume-off
                      - remote: remote.sauron
                      - device: ampli
                      - tap_command: Mute
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - icon: mdi:arrow-down-bold
                      - tap_command: DPAD_DOWN
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - icon: mdi:volume-medium
                      - remote: remote.sauron
                      - device: ampli
                      - tap_command: Volume Down
                      - hold_command: Volume Down
                      - num_repeats: 10
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - icon: mdi:volume-high
                      - remote: remote.sauron
                      - device: ampli
                      - tap_command: Volume Up
                      - hold_command: Volume Up
                      - num_repeats: 10
              - square: false
                columns: 5
                type: grid
                cards:
                  - type: custom:decluttering-card
                    template: remote_button_activity_picture
                    variables:
                      - picture: /local/media/remote/YouTube.svg
                      - tap_activity: https://www.youtube.com
                  - type: custom:decluttering-card
                    template: remote_button_activity_picture
                    variables:
                      - picture: /local/media/remote/Netflix.svg
                      - tap_activity: com.netflix.ninja
                  - type: custom:decluttering-card
                    template: remote_button_activity_picture
                    variables:
                      - picture: /local/media/remote/Amazon_Prime_Video.svg
                      - tap_activity: com.amazon.amazonvideo.livingroom
                  - type: custom:decluttering-card
                    template: remote_button_activity_picture
                    variables:
                      - picture: /local/media/remote/Spotify.svg
                      - tap_activity: com.spotify.tv.android
                  - type: custom:decluttering-card
                    template: remote_button_activity_picture
                    variables:
                      - picture: /local/media/remote/Auvio.png
                      - tap_activity: be.rtbf.auvio
                  - type: custom:decluttering-card
                    template: remote_button_activity_picture
                    variables:
                      - picture: /local/media/remote/AppleTV.png
                      - tap_activity: com.apple.atve.androidtv.appletv
                  - type: custom:button-card
                    entity_picture: /local/media/remote/RTBF_La_Première.png
                    show_entity_picture: true
                    tap_action:
                      action: call-service
                      service: script.switch_tv_channel
                      service_data:
                        channel:
                          - 8
                          - 5
                          - 0
                    styles:
                      card:
                        - heigth: 70px
                      icon:
                        - width: 80px
                    card_mod:
                      style: |
                        ha-card {
                          background-color: rgba(0,0,0,0);
                          box-shadow: none;
                          border-style: hidden;
                        }
                  - type: custom:button-card
                    entity_picture: /local/media/remote/RTBF_Tipik.png
                    show_entity_picture: true
                    tap_action:
                      action: call-service
                      service: script.switch_tv_channel
                      service_data:
                        channel:
                          - 1
                          - 4
                          - 2
                    styles:
                      card:
                        - heigth: 70px
                      icon:
                        - width: 80px
                    card_mod:
                      style: |
                        ha-card {
                          background-color: rgba(0,0,0,0);
                          box-shadow: none;
                          border-style: hidden;
                        }
                  - type: custom:button-card
                    entity_picture: /local/media/remote/LN_Radio.png
                    show_entity_picture: true
                    tap_action:
                      action: call-service
                      service: script.switch_tv_channel
                      service_data:
                        channel:
                          - 8
                          - 6
                          - 6
                    styles:
                      card:
                        - heigth: 70px
                      icon:
                        - width: 80px
                    card_mod:
                      style: |
                        ha-card {
                          background-color: rgba(0,0,0,0);
                          box-shadow: none;
                          border-style: hidden;
                        }
                  - type: custom:button-card
                    entity_picture: /local/media/remote/Nostalgie.png
                    show_entity_picture: true
                    tap_action:
                      action: call-service
                      service: script.switch_tv_channel
                      service_data:
                        channel:
                          - 8
                          - 6
                          - 5
                    styles:
                      card:
                        - heigth: 70px
                      icon:
                        - width: 80px
                    card_mod:
                      style: |
                        ha-card {
                          background-color: rgba(0,0,0,0);
                          box-shadow: none;
                          border-style: hidden;
                        }
              - square: false
                columns: 5
                type: grid
                cards:
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - icon: mdi:numeric-1-box-outline
                      - tap_command: 1
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - icon: mdi:numeric-2-box-outline
                      - tap_command: 2
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - icon: mdi:numeric-3-box-outline
                      - tap_command: 3
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - icon: mdi:numeric-4-box-outline
                      - tap_command: 4
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - icon: mdi:numeric-5-box-outline
                      - tap_command: 5
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - icon: mdi:numeric-6-box-outline
                      - tap_command: 6
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - icon: mdi:numeric-7-box-outline
                      - tap_command: 7
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - icon: mdi:numeric-8-box-outline
                      - tap_command: 8
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - icon: mdi:numeric-9-box-outline
                      - tap_command: 9
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - icon: mdi:numeric-0-box-outline
                      - tap_command: 0
              - square: false
                columns: 5
                type: grid
                cards:
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - icon: mdi:television-classic
                      - remote: remote.sauron
                      - device: television
                      - tap_command: Power
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - icon: mdi:box
                      - remote: remote.artemis
                      - tap_command: POWER
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - icon: mdi:amplifier
                      - remote: remote.sauron
                      - device: ampli
                      - tap_command: Power
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - icon: mdi:projector
                      - remote: remote.elrond
                      - tap_command: POWER
      - type: grid
        cards:
          - title: Projo
            type: vertical-stack
            cards:
              - square: false
                type: grid
                columns: 5
                cards:
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - remote: remote.elrond
                      - icon: mdi:arrow-left
                      - tap_command: BACK
                      - hold_command: BACK
                      - hold_secs: 0.5
                  - type: custom:decluttering-card
                    template: remote_button_empty
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - remote: remote.elrond
                      - icon: mdi:arrow-up-bold
                      - tap_command: DPAD_UP
                  - type: custom:decluttering-card
                    template: remote_button_empty
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - remote: remote.elrond
                      - icon: mdi:home
                      - tap_command: HOME
                      - hold_command: HOME
                      - hold_secs: 0.5
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - remote: remote.elrond
                      - icon: mdi:rewind
                      - tap_command: MEDIA_PREVIOUS
                      - hold_command: MEDIA_REWIND
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - remote: remote.elrond
                      - icon: mdi:arrow-left-bold
                      - tap_command: DPAD_LEFT
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - remote: remote.elrond
                      - icon: mdi:circle
                      - tap_command: DPAD_CENTER
                      - hold_command: DPAD_CENTER
                      - hold_secs: 0.5
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - remote: remote.elrond
                      - icon: mdi:arrow-right-bold
                      - tap_command: DPAD_RIGHT
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - remote: remote.elrond
                      - icon: mdi:fast-forward
                      - tap_command: MEDIA_NEXT
                      - hold_command: MEDIA_FAST_FORWARD
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - remote: remote.elrond
                      - icon: mdi:play-pause
                      - tap_command: MEDIA_PLAY_PAUSE
                      - hold_command: MEDIA_STOP
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - icon: mdi:volume-off
                      - remote: remote.elrond
                      - device: ampli
                      - tap_command: MUTE
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - remote: remote.elrond
                      - icon: mdi:arrow-down-bold
                      - tap_command: DPAD_DOWN
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - icon: mdi:volume-medium
                      - remote: remote.elrond
                      - tap_command: VOLUME_DOWN
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - icon: mdi:volume-high
                      - remote: remote.elrond
                      - tap_command: VOLUME_UP
      - type: grid
        cards:
          - title: AMPLI
            type: vertical-stack
            cards:
              - square: false
                columns: 5
                type: grid
                cards:
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - icon: mdi:hdmi-port
                      - name: 1
                      - remote: remote.sauron
                      - device: ampli
                      - tap_command: hdmi1
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - icon: mdi:hdmi-port
                      - name: 2
                      - remote: remote.sauron
                      - device: ampli
                      - tap_command: hdmi2
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - icon: mdi:hdmi-port
                      - name: 3
                      - remote: remote.sauron
                      - device: ampli
                      - tap_command: hdmi3
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - icon: mdi:hdmi-port
                      - name: 4
                      - remote: remote.sauron
                      - device: ampli
                      - tap_command: hdmi4
              - square: false
                columns: 6
                type: grid
                cards:
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - icon: mdi:audio-input-rca
                      - name: 1
                      - remote: remote.sauron
                      - device: ampli
                      - tap_command: av1
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - icon: mdi:audio-input-rca
                      - name: 2
                      - remote: remote.sauron
                      - device: ampli
                      - tap_command: av2
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - icon: mdi:audio-input-rca
                      - name: 3
                      - remote: remote.sauron
                      - device: ampli
                      - tap_command: av3
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - icon: mdi:audio-input-rca
                      - name: 4
                      - remote: remote.sauron
                      - device: ampli
                      - tap_command: av4
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - icon: mdi:audio-input-rca
                      - name: 5
                      - remote: remote.sauron
                      - device: ampli
                      - tap_command: av5
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - icon: mdi:audio-input-rca
                      - name: 6
                      - remote: remote.sauron
                      - device: ampli
                      - tap_command: av6
      - type: grid
        cards:
          - title: HDX
            type: vertical-stack
            cards:
              - square: false
                type: grid
                columns: 5
                cards:
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - icon: mdi:arrow-left
                      - remote: remote.sauron
                      - device: hdx
                      - tap_command: Back
                  - type: custom:decluttering-card
                    template: remote_button_empty
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - icon: mdi:arrow-up-bold
                      - remote: remote.sauron
                      - device: hdx
                      - tap_command: Up
                  - type: custom:decluttering-card
                    template: remote_button_empty
                  - type: custom:decluttering-card
                    template: remote_button_empty
                  - type: custom:decluttering-card
                    template: remote_button_empty
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - icon: mdi:arrow-left-bold
                      - remote: remote.sauron
                      - device: hdx
                      - tap_command: Left
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - icon: mdi:circle
                      - remote: remote.sauron
                      - device: hdx
                      - tap_command: Enter
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - icon: mdi:arrow-right-bold
                      - remote: remote.sauron
                      - device: hdx
                      - tap_command: Right
                  - type: custom:decluttering-card
                    template: remote_button_empty
                  - type: custom:decluttering-card
                    template: remote_button_empty
                  - type: custom:decluttering-card
                    template: remote_button_empty
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - icon: mdi:arrow-down-bold
                      - remote: remote.sauron
                      - device: hdx
                      - tap_command: Down
                  - type: custom:decluttering-card
                    template: remote_button_empty
                  - type: custom:decluttering-card
                    template: remote_button_empty
                  - type: custom:decluttering-card
                    template: remote_button_empty
                  - type: custom:decluttering-card
                    template: remote_button_empty
                  - type: custom:decluttering-card
                    template: remote_button_empty
                  - type: custom:decluttering-card
                    template: remote_button_empty
                  - type: custom:decluttering-card
                    template: remote_button_empty
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - icon: mdi:play
                      - remote: remote.sauron
                      - device: hdx
                      - tap_command: Play
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - icon: mdi:pause
                      - remote: remote.sauron
                      - device: hdx
                      - tap_command: Pause
                  - type: custom:decluttering-card
                    template: remote_button_icon
                    variables:
                      - icon: mdi:stop
                      - remote: remote.sauron
                      - device: hdx
                      - tap_command: Stop
  - title: Local Technique
    path: local-technique
    subview: false
    cards: []
    type: sections
    sections:
      - type: grid
        cards:
          - type: custom:mushroom-chips-card
            chips:
              - type: action
                icon: mdi:home-outline
                tap_action:
                  action: navigate
                  navigation_path: home
                hold_action:
                  action: none
                double_tap_action:
                  action: none
              - type: template
                content: Local Technique
                tap_action: none
              - type: menu
            alignment: justify
          - type: heading
            heading: Battery
            heading_style: title
            icon: mdi:battery
          - type: custom:auto-entities
            show_empty: false
            sort:
              method: state
              numeric: true
              reverse: true
            card:
              type: custom:bar-card
              positions:
                icon: 'off'
              height: 20px
              min: 0
              max: 100
              severity:
                - color: '#008000'
                  from: 70
                  to: 100
                - color: '#ff9900'
                  from: 41
                  to: 70
                - color: '#ff9900'
                  from: 11
                  to: 40
                - color: '#ff0000'
                  from: 0
                  to: 39
            filter:
              include:
                - entity_id: sensor.*_battery
              exclude: null
      - type: grid
        cards:
          - type: heading
            icon: mdi:bluetooth
            heading: Bluetooth
          - type: custom:auto-entities
            show_empty: false
            sort:
              method: state
              numeric: true
              reverse: true
            card:
              type: custom:bar-card
              positions:
                icon: 'off'
              height: 20px
              min: -100
              max: 0
              severity:
                - color: '#cc0000'
                  from: -100
                  to: -70
                - color: '#914900'
                  from: -69
                  to: -63
                - color: '#cc6600'
                  from: -62
                  to: -47
                - color: '#009900'
                  from: -46
                  to: 0
            filter:
              include:
                - entity_id: sensor.*_signal_strength
              exclude: null
      - type: grid
        cards:
          - type: heading
            heading: Température
            icon: mdi:thermometer
          - type: custom:auto-entities
            show_empty: false
            sort:
              method: state
              numeric: true
              reverse: true
            card:
              type: custom:bar-card
              positions:
                icon: 'off'
              height: 20px
              min: 0
              max: 30
              severity:
                - color: blue
                  from: 0
                  to: 15
                - color: green
                  from: 16
                  to: 22
                - color: orange
                  from: 22
                  to: 26.99
                - color: red
                  from: 27
                  to: 99
            filter:
              include:
                - entity_id: sensor.*_temperature
              exclude:
                - entity_id: sensor.system_monitor_processor_temperature
                - entity_id: sensor.bambulab_*
      - type: grid
        cards:
          - type: heading
            heading: Humidité
            icon: mdi:water
          - type: custom:auto-entities
            show_empty: false
            sort:
              method: state
              numeric: true
              reverse: true
            card:
              type: custom:bar-card
              positions:
                icon: 'off'
              height: 20px
              min: 0
              max: 100
              severity:
                - color: red
                  from: 0
                  to: 30
                - color: orange
                  from: 31
                  to: 40
                - color: green
                  from: 41
                  to: 79
                - color: blue
                  from: 80
                  to: 100
            filter:
              include:
                - entity_id: sensor.*_humidity
              exclude:
                - entity_id: sensor.system_monitor_processor_temperature
      - type: grid
        cards:
          - type: heading
            heading: Wifi
            heading_style: title
            icon: mdi:wifi
          - type: custom:auto-entities
            show_empty: false
            sort:
              method: state
              numeric: true
              reverse: true
            card:
              type: custom:bar-card
              positions:
                icon: 'off'
              height: 20px
              min: -100
              max: 0
              severity:
                - color: '#cc0000'
                  from: -100
                  to: -70
                - color: '#914900'
                  from: -69
                  to: -63
                - color: '#cc6600'
                  from: -62
                  to: -47
                - color: '#009900'
                  from: -46
                  to: 0
            filter:
              include:
                - entity_id: sensor.*_wifi_signal
                - entity_id: sensor.*_rssi
      - type: grid
        cards:
          - type: heading
            heading: Power consumption
            heading_style: title
            icon: mdi:lightning-bolt
          - type: custom:auto-entities
            show_empty: false
            sort:
              method: state
              numeric: true
              reverse: true
            card:
              type: custom:bar-card
              positions:
                icon: 'off'
              height: 20px
              min: 0
              max: 1000
            severity:
              - color: green
                from: 0
                to: 100
              - color: '#ff9900'
                from: 101
                to: 200
              - color: '#ff6600'
                from: 201
                to: 500
              - color: red
                from: 501
                to: 1000
            filter:
              include:
                - label: Power Consumption
      - type: grid
        cards:
          - type: heading
            heading: Raspberry Pi
            heading_style: title
            icon: mdi:raspberry-pi
          - type: custom:auto-entities
            show_empty: false
            sort:
              method: state
              numeric: false
              reverse: false
              ip: false
            card:
              type: entities
              state_color: false
              show_header_toggle: false
            filter:
              include:
                - entity_id: sensor.system_monitor_*
              exclude: null
    max_columns: 4
    icon: ''
